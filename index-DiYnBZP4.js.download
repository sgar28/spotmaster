const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/browser-DOKjY0TJ.js","assets/vendor-CZINaau_.js"])))=>i.map(i=>d[i]);
import{r as Zs,a as g,g as er,c as U,j as a,u as xt,m as M,b as tr,L as G,B as sr,R as rr,d as re,N as ls}from"./vendor-CZINaau_.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))s(n);new MutationObserver(n=>{for(const i of n)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function t(n){const i={};return n.integrity&&(i.integrity=n.integrity),n.referrerPolicy&&(i.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?i.credentials="include":n.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(n){if(n.ep)return;n.ep=!0;const i=t(n);fetch(n.href,i)}})();var cs,Dt=Zs;cs=Dt.createRoot,Dt.hydrateRoot;let nr={data:""},ir=r=>typeof window=="object"?((r?r.querySelector("#_goober"):window._goober)||Object.assign((r||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:r||nr,ar=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,or=/\/\*[^]*?\*\/|  +/g,Lt=/\n+/g,X=(r,e)=>{let t="",s="",n="";for(let i in r){let o=r[i];i[0]=="@"?i[1]=="i"?t=i+" "+o+";":s+=i[1]=="f"?X(o,i):i+"{"+X(o,i[1]=="k"?"":e)+"}":typeof o=="object"?s+=X(o,e?e.replace(/([^,])+/g,l=>i.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,c=>/&/.test(c)?c.replace(/&/g,l):l?l+" "+c:c)):i):o!=null&&(i=/^--/.test(i)?i:i.replace(/[A-Z]/g,"-$&").toLowerCase(),n+=X.p?X.p(i,o):i+":"+o+";")}return t+(e&&n?e+"{"+n+"}":n)+s},H={},ds=r=>{if(typeof r=="object"){let e="";for(let t in r)e+=t+ds(r[t]);return e}return r},lr=(r,e,t,s,n)=>{let i=ds(r),o=H[i]||(H[i]=(c=>{let u=0,d=11;for(;u<c.length;)d=101*d+c.charCodeAt(u++)>>>0;return"go"+d})(i));if(!H[o]){let c=i!==r?r:(u=>{let d,h,f=[{}];for(;d=ar.exec(u.replace(or,""));)d[4]?f.shift():d[3]?(h=d[3].replace(Lt," ").trim(),f.unshift(f[0][h]=f[0][h]||{})):f[0][d[1]]=d[2].replace(Lt," ").trim();return f[0]})(r);H[o]=X(n?{["@keyframes "+o]:c}:c,t?"":"."+o)}let l=t&&H.g?H.g:null;return t&&(H.g=H[o]),((c,u,d,h)=>{h?u.data=u.data.replace(h,c):u.data.indexOf(c)===-1&&(u.data=d?c+u.data:u.data+c)})(H[o],e,s,l),o},cr=(r,e,t)=>r.reduce((s,n,i)=>{let o=e[i];if(o&&o.call){let l=o(t),c=l&&l.props&&l.props.className||/^go/.test(l)&&l;o=c?"."+c:l&&typeof l=="object"?l.props?"":X(l,""):l===!1?"":l}return s+n+(o??"")},"");function Ye(r){let e=this||{},t=r.call?r(e.p):r;return lr(t.unshift?t.raw?cr(t,[].slice.call(arguments,1),e.p):t.reduce((s,n)=>Object.assign(s,n&&n.call?n(e.p):n),{}):t,ir(e.target),e.g,e.o,e.k)}let us,ut,ht;Ye.bind({g:1});let J=Ye.bind({k:1});function dr(r,e,t,s){X.p=e,us=r,ut=t,ht=s}function ee(r,e){let t=this||{};return function(){let s=arguments;function n(i,o){let l=Object.assign({},i),c=l.className||n.className;t.p=Object.assign({theme:ut&&ut()},l),t.o=/ *go\d+/.test(c),l.className=Ye.apply(t,s)+(c?" "+c:"");let u=r;return r[0]&&(u=l.as||r,delete l.as),ht&&u[0]&&ht(l),us(u,l)}return n}}var ur=r=>typeof r=="function",Ge=(r,e)=>ur(r)?r(e):r,hr=(()=>{let r=0;return()=>(++r).toString()})(),hs=(()=>{let r;return()=>{if(r===void 0&&typeof window<"u"){let e=matchMedia("(prefers-reduced-motion: reduce)");r=!e||e.matches}return r}})(),fr=20,fs=(r,e)=>{switch(e.type){case 0:return{...r,toasts:[e.toast,...r.toasts].slice(0,fr)};case 1:return{...r,toasts:r.toasts.map(i=>i.id===e.toast.id?{...i,...e.toast}:i)};case 2:let{toast:t}=e;return fs(r,{type:r.toasts.find(i=>i.id===t.id)?1:0,toast:t});case 3:let{toastId:s}=e;return{...r,toasts:r.toasts.map(i=>i.id===s||s===void 0?{...i,dismissed:!0,visible:!1}:i)};case 4:return e.toastId===void 0?{...r,toasts:[]}:{...r,toasts:r.toasts.filter(i=>i.id!==e.toastId)};case 5:return{...r,pausedAt:e.time};case 6:let n=e.time-(r.pausedAt||0);return{...r,pausedAt:void 0,toasts:r.toasts.map(i=>({...i,pauseDuration:i.pauseDuration+n}))}}},He=[],ze={toasts:[],pausedAt:void 0},de=r=>{ze=fs(ze,r),He.forEach(e=>{e(ze)})},mr={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},gr=(r={})=>{let[e,t]=g.useState(ze);g.useEffect(()=>(He.push(t),()=>{let n=He.indexOf(t);n>-1&&He.splice(n,1)}),[e]);let s=e.toasts.map(n=>{var i,o,l;return{...r,...r[n.type],...n,removeDelay:n.removeDelay||((i=r[n.type])==null?void 0:i.removeDelay)||(r==null?void 0:r.removeDelay),duration:n.duration||((o=r[n.type])==null?void 0:o.duration)||(r==null?void 0:r.duration)||mr[n.type],style:{...r.style,...(l=r[n.type])==null?void 0:l.style,...n.style}}});return{...e,toasts:s}},pr=(r,e="blank",t)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:e,ariaProps:{role:"status","aria-live":"polite"},message:r,pauseDuration:0,...t,id:(t==null?void 0:t.id)||hr()}),Re=r=>(e,t)=>{let s=pr(e,r,t);return de({type:2,toast:s}),s.id},R=(r,e)=>Re("blank")(r,e);R.error=Re("error");R.success=Re("success");R.loading=Re("loading");R.custom=Re("custom");R.dismiss=r=>{de({type:3,toastId:r})};R.remove=r=>de({type:4,toastId:r});R.promise=(r,e,t)=>{let s=R.loading(e.loading,{...t,...t==null?void 0:t.loading});return typeof r=="function"&&(r=r()),r.then(n=>{let i=e.success?Ge(e.success,n):void 0;return i?R.success(i,{id:s,...t,...t==null?void 0:t.success}):R.dismiss(s),n}).catch(n=>{let i=e.error?Ge(e.error,n):void 0;i?R.error(i,{id:s,...t,...t==null?void 0:t.error}):R.dismiss(s)}),r};var yr=(r,e)=>{de({type:1,toast:{id:r,height:e}})},br=()=>{de({type:5,time:Date.now()})},Te=new Map,vr=1e3,wr=(r,e=vr)=>{if(Te.has(r))return;let t=setTimeout(()=>{Te.delete(r),de({type:4,toastId:r})},e);Te.set(r,t)},xr=r=>{let{toasts:e,pausedAt:t}=gr(r);g.useEffect(()=>{if(t)return;let i=Date.now(),o=e.map(l=>{if(l.duration===1/0)return;let c=(l.duration||0)+l.pauseDuration-(i-l.createdAt);if(c<0){l.visible&&R.dismiss(l.id);return}return setTimeout(()=>R.dismiss(l.id),c)});return()=>{o.forEach(l=>l&&clearTimeout(l))}},[e,t]);let s=g.useCallback(()=>{t&&de({type:6,time:Date.now()})},[t]),n=g.useCallback((i,o)=>{let{reverseOrder:l=!1,gutter:c=8,defaultPosition:u}=o||{},d=e.filter(m=>(m.position||u)===(i.position||u)&&m.height),h=d.findIndex(m=>m.id===i.id),f=d.filter((m,p)=>p<h&&m.visible).length;return d.filter(m=>m.visible).slice(...l?[f+1]:[0,f]).reduce((m,p)=>m+(p.height||0)+c,0)},[e]);return g.useEffect(()=>{e.forEach(i=>{if(i.dismissed)wr(i.id,i.removeDelay);else{let o=Te.get(i.id);o&&(clearTimeout(o),Te.delete(i.id))}})},[e]),{toasts:e,handlers:{updateHeight:yr,startPause:br,endPause:s,calculateOffset:n}}},_r=J`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,jr=J`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,kr=J`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,Sr=ee("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${r=>r.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${_r} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${jr} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${r=>r.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${kr} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,Nr=J`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,Pr=ee("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${r=>r.secondary||"#e0e0e0"};
  border-right-color: ${r=>r.primary||"#616161"};
  animation: ${Nr} 1s linear infinite;
`,Er=J`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,Tr=J`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,Or=ee("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${r=>r.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${Er} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${Tr} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${r=>r.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,Cr=ee("div")`
  position: absolute;
`,$r=ee("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,Ar=J`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,Rr=ee("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${Ar} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,Dr=({toast:r})=>{let{icon:e,type:t,iconTheme:s}=r;return e!==void 0?typeof e=="string"?g.createElement(Rr,null,e):e:t==="blank"?null:g.createElement($r,null,g.createElement(Pr,{...s}),t!=="loading"&&g.createElement(Cr,null,t==="error"?g.createElement(Sr,{...s}):g.createElement(Or,{...s})))},Lr=r=>`
0% {transform: translate3d(0,${r*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,Ir=r=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${r*-150}%,-1px) scale(.6); opacity:0;}
`,Mr="0%{opacity:0;} 100%{opacity:1;}",Ur="0%{opacity:1;} 100%{opacity:0;}",Br=ee("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,Fr=ee("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,qr=(r,e)=>{let t=r.includes("top")?1:-1,[s,n]=hs()?[Mr,Ur]:[Lr(t),Ir(t)];return{animation:e?`${J(s)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${J(n)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},Wr=g.memo(({toast:r,position:e,style:t,children:s})=>{let n=r.height?qr(r.position||e||"top-center",r.visible):{opacity:0},i=g.createElement(Dr,{toast:r}),o=g.createElement(Fr,{...r.ariaProps},Ge(r.message,r));return g.createElement(Br,{className:r.className,style:{...n,...t,...r.style}},typeof s=="function"?s({icon:i,message:o}):g.createElement(g.Fragment,null,i,o))});dr(g.createElement);var Hr=({id:r,className:e,style:t,onHeightUpdate:s,children:n})=>{let i=g.useCallback(o=>{if(o){let l=()=>{let c=o.getBoundingClientRect().height;s(r,c)};l(),new MutationObserver(l).observe(o,{subtree:!0,childList:!0,characterData:!0})}},[r,s]);return g.createElement("div",{ref:i,className:e,style:t},n)},zr=(r,e)=>{let t=r.includes("top"),s=t?{top:0}:{bottom:0},n=r.includes("center")?{justifyContent:"center"}:r.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:hs()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${e*(t?1:-1)}px)`,...s,...n}},Gr=Ye`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,Ue=16,Jr=({reverseOrder:r,position:e="top-center",toastOptions:t,gutter:s,children:n,containerStyle:i,containerClassName:o})=>{let{toasts:l,handlers:c}=xr(t);return g.createElement("div",{id:"_rht_toaster",style:{position:"fixed",zIndex:9999,top:Ue,left:Ue,right:Ue,bottom:Ue,pointerEvents:"none",...i},className:o,onMouseEnter:c.startPause,onMouseLeave:c.endPause},l.map(u=>{let d=u.position||e,h=c.calculateOffset(u,{reverseOrder:r,gutter:s,defaultPosition:e}),f=zr(d,h);return g.createElement(Hr,{id:u.id,key:u.id,onHeightUpdate:c.updateHeight,className:u.visible?Gr:"",style:f},u.type==="custom"?Ge(u.message,u):n?n(u):g.createElement(Wr,{toast:u,position:d}))}))},N=R;const Vr="modulepreload",Yr=function(r){return"/"+r},It={},be=function(e,t,s){let n=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),l=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));n=Promise.allSettled(t.map(c=>{if(c=Yr(c),c in It)return;It[c]=!0;const u=c.endsWith(".css"),d=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${d}`))return;const h=document.createElement("link");if(h.rel=u?"stylesheet":Vr,u||(h.as="script"),h.crossOrigin="",h.href=c,l&&h.setAttribute("nonce",l),document.head.appendChild(h),u)return new Promise((f,m)=>{h.addEventListener("load",f),h.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return n.then(o=>{for(const l of o||[])l.status==="rejected"&&i(l.reason);return e().catch(i)})},Kr=r=>{let e;return r?e=r:typeof fetch>"u"?e=(...t)=>be(async()=>{const{default:s}=await Promise.resolve().then(()=>we);return{default:s}},void 0).then(({default:s})=>s(...t)):e=fetch,(...t)=>e(...t)};class _t extends Error{constructor(e,t="FunctionsError",s){super(e),this.name=t,this.context=s}}class Qr extends _t{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class Xr extends _t{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class Zr extends _t{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var ft;(function(r){r.Any="any",r.ApNortheast1="ap-northeast-1",r.ApNortheast2="ap-northeast-2",r.ApSouth1="ap-south-1",r.ApSoutheast1="ap-southeast-1",r.ApSoutheast2="ap-southeast-2",r.CaCentral1="ca-central-1",r.EuCentral1="eu-central-1",r.EuWest1="eu-west-1",r.EuWest2="eu-west-2",r.EuWest3="eu-west-3",r.SaEast1="sa-east-1",r.UsEast1="us-east-1",r.UsWest1="us-west-1",r.UsWest2="us-west-2"})(ft||(ft={}));var en=function(r,e,t,s){function n(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function l(d){try{u(s.next(d))}catch(h){o(h)}}function c(d){try{u(s.throw(d))}catch(h){o(h)}}function u(d){d.done?i(d.value):n(d.value).then(l,c)}u((s=s.apply(r,e||[])).next())})};class tn{constructor(e,{headers:t={},customFetch:s,region:n=ft.Any}={}){this.url=e,this.headers=t,this.region=n,this.fetch=Kr(s)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,t={}){var s;return en(this,void 0,void 0,function*(){try{const{headers:n,method:i,body:o}=t;let l={},{region:c}=t;c||(c=this.region),c&&c!=="any"&&(l["x-region"]=c);let u;o&&(n&&!Object.prototype.hasOwnProperty.call(n,"Content-Type")||!n)&&(typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(l["Content-Type"]="application/octet-stream",u=o):typeof o=="string"?(l["Content-Type"]="text/plain",u=o):typeof FormData<"u"&&o instanceof FormData?u=o:(l["Content-Type"]="application/json",u=JSON.stringify(o)));const d=yield this.fetch(`${this.url}/${e}`,{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},l),this.headers),n),body:u}).catch(p=>{throw new Qr(p)}),h=d.headers.get("x-relay-error");if(h&&h==="true")throw new Xr(d);if(!d.ok)throw new Zr(d);let f=((s=d.headers.get("Content-Type"))!==null&&s!==void 0?s:"text/plain").split(";")[0].trim(),m;return f==="application/json"?m=yield d.json():f==="application/octet-stream"?m=yield d.blob():f==="text/event-stream"?m=d:f==="multipart/form-data"?m=yield d.formData():m=yield d.text(),{data:m,error:null}}catch(n){return{data:null,error:n}}})}}var L={},jt={},Ke={},De={},Qe={},Xe={},sn=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},ve=sn();const rn=ve.fetch,ms=ve.fetch.bind(ve),gs=ve.Headers,nn=ve.Request,an=ve.Response,we=Object.freeze(Object.defineProperty({__proto__:null,Headers:gs,Request:nn,Response:an,default:ms,fetch:rn},Symbol.toStringTag,{value:"Module"})),on=er(we);var Ze={};Object.defineProperty(Ze,"__esModule",{value:!0});let ln=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}};Ze.default=ln;var ps=U&&U.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Xe,"__esModule",{value:!0});const cn=ps(on),dn=ps(Ze);let un=class{constructor(e){this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=e.headers,this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=e.shouldThrowOnError,this.signal=e.signal,this.isMaybeSingle=e.isMaybeSingle,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=cn.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,t){return this.headers=Object.assign({},this.headers),this.headers[e]=t,this}then(e,t){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const s=this.fetch;let n=s(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{var o,l,c;let u=null,d=null,h=null,f=i.status,m=i.statusText;if(i.ok){if(this.method!=="HEAD"){const j=await i.text();j===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?d=j:d=JSON.parse(j))}const b=(o=this.headers.Prefer)===null||o===void 0?void 0:o.match(/count=(exact|planned|estimated)/),w=(l=i.headers.get("content-range"))===null||l===void 0?void 0:l.split("/");b&&w&&w.length>1&&(h=parseInt(w[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(d)&&(d.length>1?(u={code:"PGRST116",details:`Results contain ${d.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},d=null,h=null,f=406,m="Not Acceptable"):d.length===1?d=d[0]:d=null)}else{const b=await i.text();try{u=JSON.parse(b),Array.isArray(u)&&i.status===404&&(d=[],u=null,f=200,m="OK")}catch{i.status===404&&b===""?(f=204,m="No Content"):u={message:b}}if(u&&this.isMaybeSingle&&(!((c=u==null?void 0:u.details)===null||c===void 0)&&c.includes("0 rows"))&&(u=null,f=200,m="OK"),u&&this.shouldThrowOnError)throw new dn.default(u)}return{error:u,data:d,count:h,status:f,statusText:m}});return this.shouldThrowOnError||(n=n.catch(i=>{var o,l,c;return{error:{message:`${(o=i==null?void 0:i.name)!==null&&o!==void 0?o:"FetchError"}: ${i==null?void 0:i.message}`,details:`${(l=i==null?void 0:i.stack)!==null&&l!==void 0?l:""}`,hint:"",code:`${(c=i==null?void 0:i.code)!==null&&c!==void 0?c:""}`},data:null,count:null,status:0,statusText:""}})),n.then(e,t)}};Xe.default=un;var hn=U&&U.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Qe,"__esModule",{value:!0});const fn=hn(Xe);let mn=class extends fn.default{select(e){let t=!1;const s=(e??"*").split("").map(n=>/\s/.test(n)&&!t?"":(n==='"'&&(t=!t),n)).join("");return this.url.searchParams.set("select",s),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(e,{ascending:t=!0,nullsFirst:s,foreignTable:n,referencedTable:i=n}={}){const o=i?`${i}.order`:"order",l=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${l?`${l},`:""}${e}.${t?"asc":"desc"}${s===void 0?"":s?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:t,referencedTable:s=t}={}){const n=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(n,`${e}`),this}range(e,t,{foreignTable:s,referencedTable:n=s}={}){const i=typeof n>"u"?"offset":`${n}.offset`,o=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(i,`${e}`),this.url.searchParams.set(o,`${t-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:e=!1,verbose:t=!1,settings:s=!1,buffers:n=!1,wal:i=!1,format:o="text"}={}){var l;const c=[e?"analyze":null,t?"verbose":null,s?"settings":null,n?"buffers":null,i?"wal":null].filter(Boolean).join("|"),u=(l=this.headers.Accept)!==null&&l!==void 0?l:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${o}; for="${u}"; options=${c};`,o==="json"?this:this}rollback(){var e;return((e=this.headers.Prefer)!==null&&e!==void 0?e:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};Qe.default=mn;var gn=U&&U.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(De,"__esModule",{value:!0});const pn=gn(Qe);let yn=class extends pn.default{eq(e,t){return this.url.searchParams.append(e,`eq.${t}`),this}neq(e,t){return this.url.searchParams.append(e,`neq.${t}`),this}gt(e,t){return this.url.searchParams.append(e,`gt.${t}`),this}gte(e,t){return this.url.searchParams.append(e,`gte.${t}`),this}lt(e,t){return this.url.searchParams.append(e,`lt.${t}`),this}lte(e,t){return this.url.searchParams.append(e,`lte.${t}`),this}like(e,t){return this.url.searchParams.append(e,`like.${t}`),this}likeAllOf(e,t){return this.url.searchParams.append(e,`like(all).{${t.join(",")}}`),this}likeAnyOf(e,t){return this.url.searchParams.append(e,`like(any).{${t.join(",")}}`),this}ilike(e,t){return this.url.searchParams.append(e,`ilike.${t}`),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,`ilike(any).{${t.join(",")}}`),this}is(e,t){return this.url.searchParams.append(e,`is.${t}`),this}in(e,t){const s=Array.from(new Set(t)).map(n=>typeof n=="string"&&new RegExp("[,()]").test(n)?`"${n}"`:`${n}`).join(",");return this.url.searchParams.append(e,`in.(${s})`),this}contains(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cs.{${t.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(t)}`),this}containedBy(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cd.{${t.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(t)}`),this}rangeGt(e,t){return this.url.searchParams.append(e,`sr.${t}`),this}rangeGte(e,t){return this.url.searchParams.append(e,`nxl.${t}`),this}rangeLt(e,t){return this.url.searchParams.append(e,`sl.${t}`),this}rangeLte(e,t){return this.url.searchParams.append(e,`nxr.${t}`),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,`adj.${t}`),this}overlaps(e,t){return typeof t=="string"?this.url.searchParams.append(e,`ov.${t}`):this.url.searchParams.append(e,`ov.{${t.join(",")}}`),this}textSearch(e,t,{config:s,type:n}={}){let i="";n==="plain"?i="pl":n==="phrase"?i="ph":n==="websearch"&&(i="w");const o=s===void 0?"":`(${s})`;return this.url.searchParams.append(e,`${i}fts${o}.${t}`),this}match(e){return Object.entries(e).forEach(([t,s])=>{this.url.searchParams.append(t,`eq.${s}`)}),this}not(e,t,s){return this.url.searchParams.append(e,`not.${t}.${s}`),this}or(e,{foreignTable:t,referencedTable:s=t}={}){const n=s?`${s}.or`:"or";return this.url.searchParams.append(n,`(${e})`),this}filter(e,t,s){return this.url.searchParams.append(e,`${t}.${s}`),this}};De.default=yn;var bn=U&&U.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Ke,"__esModule",{value:!0});const ke=bn(De);let vn=class{constructor(e,{headers:t={},schema:s,fetch:n}){this.url=e,this.headers=t,this.schema=s,this.fetch=n}select(e,{head:t=!1,count:s}={}){const n=t?"HEAD":"GET";let i=!1;const o=(e??"*").split("").map(l=>/\s/.test(l)&&!i?"":(l==='"'&&(i=!i),l)).join("");return this.url.searchParams.set("select",o),s&&(this.headers.Prefer=`count=${s}`),new ke.default({method:n,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(e,{count:t,defaultToNull:s=!0}={}){const n="POST",i=[];if(this.headers.Prefer&&i.push(this.headers.Prefer),t&&i.push(`count=${t}`),s||i.push("missing=default"),this.headers.Prefer=i.join(","),Array.isArray(e)){const o=e.reduce((l,c)=>l.concat(Object.keys(c)),[]);if(o.length>0){const l=[...new Set(o)].map(c=>`"${c}"`);this.url.searchParams.set("columns",l.join(","))}}return new ke.default({method:n,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}upsert(e,{onConflict:t,ignoreDuplicates:s=!1,count:n,defaultToNull:i=!0}={}){const o="POST",l=[`resolution=${s?"ignore":"merge"}-duplicates`];if(t!==void 0&&this.url.searchParams.set("on_conflict",t),this.headers.Prefer&&l.push(this.headers.Prefer),n&&l.push(`count=${n}`),i||l.push("missing=default"),this.headers.Prefer=l.join(","),Array.isArray(e)){const c=e.reduce((u,d)=>u.concat(Object.keys(d)),[]);if(c.length>0){const u=[...new Set(c)].map(d=>`"${d}"`);this.url.searchParams.set("columns",u.join(","))}}return new ke.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}update(e,{count:t}={}){const s="PATCH",n=[];return this.headers.Prefer&&n.push(this.headers.Prefer),t&&n.push(`count=${t}`),this.headers.Prefer=n.join(","),new ke.default({method:s,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}delete({count:e}={}){const t="DELETE",s=[];return e&&s.push(`count=${e}`),this.headers.Prefer&&s.unshift(this.headers.Prefer),this.headers.Prefer=s.join(","),new ke.default({method:t,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};Ke.default=vn;var et={},tt={};Object.defineProperty(tt,"__esModule",{value:!0});tt.version=void 0;tt.version="0.0.0-automated";Object.defineProperty(et,"__esModule",{value:!0});et.DEFAULT_HEADERS=void 0;const wn=tt;et.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${wn.version}`};var ys=U&&U.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(jt,"__esModule",{value:!0});const xn=ys(Ke),_n=ys(De),jn=et;let kn=class bs{constructor(e,{headers:t={},schema:s,fetch:n}={}){this.url=e,this.headers=Object.assign(Object.assign({},jn.DEFAULT_HEADERS),t),this.schemaName=s,this.fetch=n}from(e){const t=new URL(`${this.url}/${e}`);return new xn.default(t,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new bs(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,t={},{head:s=!1,get:n=!1,count:i}={}){let o;const l=new URL(`${this.url}/rpc/${e}`);let c;s||n?(o=s?"HEAD":"GET",Object.entries(t).filter(([d,h])=>h!==void 0).map(([d,h])=>[d,Array.isArray(h)?`{${h.join(",")}}`:`${h}`]).forEach(([d,h])=>{l.searchParams.append(d,h)})):(o="POST",c=t);const u=Object.assign({},this.headers);return i&&(u.Prefer=`count=${i}`),new _n.default({method:o,url:l,headers:u,schema:this.schemaName,body:c,fetch:this.fetch,allowEmpty:!1})}};jt.default=kn;var xe=U&&U.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(L,"__esModule",{value:!0});L.PostgrestError=L.PostgrestBuilder=L.PostgrestTransformBuilder=L.PostgrestFilterBuilder=L.PostgrestQueryBuilder=L.PostgrestClient=void 0;const vs=xe(jt);L.PostgrestClient=vs.default;const ws=xe(Ke);L.PostgrestQueryBuilder=ws.default;const xs=xe(De);L.PostgrestFilterBuilder=xs.default;const _s=xe(Qe);L.PostgrestTransformBuilder=_s.default;const js=xe(Xe);L.PostgrestBuilder=js.default;const ks=xe(Ze);L.PostgrestError=ks.default;var Sn=L.default={PostgrestClient:vs.default,PostgrestQueryBuilder:ws.default,PostgrestFilterBuilder:xs.default,PostgrestTransformBuilder:_s.default,PostgrestBuilder:js.default,PostgrestError:ks.default};const{PostgrestClient:Nn,PostgrestQueryBuilder:Do,PostgrestFilterBuilder:Lo,PostgrestTransformBuilder:Io,PostgrestBuilder:Mo,PostgrestError:Uo}=Sn,Pn="2.11.2",En={"X-Client-Info":`realtime-js/${Pn}`},Tn="1.0.0",Ss=1e4,On=1e3;var ye;(function(r){r[r.connecting=0]="connecting",r[r.open=1]="open",r[r.closing=2]="closing",r[r.closed=3]="closed"})(ye||(ye={}));var I;(function(r){r.closed="closed",r.errored="errored",r.joined="joined",r.joining="joining",r.leaving="leaving"})(I||(I={}));var F;(function(r){r.close="phx_close",r.error="phx_error",r.join="phx_join",r.reply="phx_reply",r.leave="phx_leave",r.access_token="access_token"})(F||(F={}));var mt;(function(r){r.websocket="websocket"})(mt||(mt={}));var oe;(function(r){r.Connecting="connecting",r.Open="open",r.Closing="closing",r.Closed="closed"})(oe||(oe={}));class Cn{constructor(){this.HEADER_LENGTH=1}decode(e,t){return e.constructor===ArrayBuffer?t(this._binaryDecode(e)):t(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const t=new DataView(e),s=new TextDecoder;return this._decodeBroadcast(e,t,s)}_decodeBroadcast(e,t,s){const n=t.getUint8(1),i=t.getUint8(2);let o=this.HEADER_LENGTH+2;const l=s.decode(e.slice(o,o+n));o=o+n;const c=s.decode(e.slice(o,o+i));o=o+i;const u=JSON.parse(s.decode(e.slice(o,e.byteLength)));return{ref:null,topic:l,event:c,payload:u}}}class Ns{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var S;(function(r){r.abstime="abstime",r.bool="bool",r.date="date",r.daterange="daterange",r.float4="float4",r.float8="float8",r.int2="int2",r.int4="int4",r.int4range="int4range",r.int8="int8",r.int8range="int8range",r.json="json",r.jsonb="jsonb",r.money="money",r.numeric="numeric",r.oid="oid",r.reltime="reltime",r.text="text",r.time="time",r.timestamp="timestamp",r.timestamptz="timestamptz",r.timetz="timetz",r.tsrange="tsrange",r.tstzrange="tstzrange"})(S||(S={}));const Mt=(r,e,t={})=>{var s;const n=(s=t.skipTypes)!==null&&s!==void 0?s:[];return Object.keys(e).reduce((i,o)=>(i[o]=$n(o,r,e,n),i),{})},$n=(r,e,t,s)=>{const n=e.find(l=>l.name===r),i=n==null?void 0:n.type,o=t[r];return i&&!s.includes(i)?Ps(i,o):gt(o)},Ps=(r,e)=>{if(r.charAt(0)==="_"){const t=r.slice(1,r.length);return Ln(e,t)}switch(r){case S.bool:return An(e);case S.float4:case S.float8:case S.int2:case S.int4:case S.int8:case S.numeric:case S.oid:return Rn(e);case S.json:case S.jsonb:return Dn(e);case S.timestamp:return In(e);case S.abstime:case S.date:case S.daterange:case S.int4range:case S.int8range:case S.money:case S.reltime:case S.text:case S.time:case S.timestamptz:case S.timetz:case S.tsrange:case S.tstzrange:return gt(e);default:return gt(e)}},gt=r=>r,An=r=>{switch(r){case"t":return!0;case"f":return!1;default:return r}},Rn=r=>{if(typeof r=="string"){const e=parseFloat(r);if(!Number.isNaN(e))return e}return r},Dn=r=>{if(typeof r=="string")try{return JSON.parse(r)}catch(e){return console.log(`JSON parse error: ${e}`),r}return r},Ln=(r,e)=>{if(typeof r!="string")return r;const t=r.length-1,s=r[t];if(r[0]==="{"&&s==="}"){let i;const o=r.slice(1,t);try{i=JSON.parse("["+o+"]")}catch{i=o?o.split(","):[]}return i.map(l=>Ps(e,l))}return r},In=r=>typeof r=="string"?r.replace(" ","T"):r,Es=r=>{let e=r;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")};class at{constructor(e,t,s={},n=Ss){this.channel=e,this.event=t,this.payload=s,this.timeout=n,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var s;return this._hasReceived(e)&&t((s=this.receivedResp)===null||s===void 0?void 0:s.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=t=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=t,this._matchReceive(t)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter(s=>s.status===e).forEach(s=>s.callback(t))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var Ut;(function(r){r.SYNC="sync",r.JOIN="join",r.LEAVE="leave"})(Ut||(Ut={}));class Oe{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const s=(t==null?void 0:t.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(s.state,{},n=>{const{onJoin:i,onLeave:o,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Oe.syncState(this.state,n,i,o),this.pendingDiffs.forEach(c=>{this.state=Oe.syncDiff(this.state,c,i,o)}),this.pendingDiffs=[],l()}),this.channel._on(s.diff,{},n=>{const{onJoin:i,onLeave:o,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(n):(this.state=Oe.syncDiff(this.state,n,i,o),l())}),this.onJoin((n,i,o)=>{this.channel._trigger("presence",{event:"join",key:n,currentPresences:i,newPresences:o})}),this.onLeave((n,i,o)=>{this.channel._trigger("presence",{event:"leave",key:n,currentPresences:i,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,s,n){const i=this.cloneDeep(e),o=this.transformState(t),l={},c={};return this.map(i,(u,d)=>{o[u]||(c[u]=d)}),this.map(o,(u,d)=>{const h=i[u];if(h){const f=d.map(w=>w.presence_ref),m=h.map(w=>w.presence_ref),p=d.filter(w=>m.indexOf(w.presence_ref)<0),b=h.filter(w=>f.indexOf(w.presence_ref)<0);p.length>0&&(l[u]=p),b.length>0&&(c[u]=b)}else l[u]=d}),this.syncDiff(i,{joins:l,leaves:c},s,n)}static syncDiff(e,t,s,n){const{joins:i,leaves:o}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return s||(s=()=>{}),n||(n=()=>{}),this.map(i,(l,c)=>{var u;const d=(u=e[l])!==null&&u!==void 0?u:[];if(e[l]=this.cloneDeep(c),d.length>0){const h=e[l].map(m=>m.presence_ref),f=d.filter(m=>h.indexOf(m.presence_ref)<0);e[l].unshift(...f)}s(l,d,c)}),this.map(o,(l,c)=>{let u=e[l];if(!u)return;const d=c.map(h=>h.presence_ref);u=u.filter(h=>d.indexOf(h.presence_ref)<0),e[l]=u,n(l,u,c),u.length===0&&delete e[l]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(s=>t(s,e[s]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,s)=>{const n=e[s];return"metas"in n?t[s]=n.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):t[s]=n,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Bt;(function(r){r.ALL="*",r.INSERT="INSERT",r.UPDATE="UPDATE",r.DELETE="DELETE"})(Bt||(Bt={}));var Ft;(function(r){r.BROADCAST="broadcast",r.PRESENCE="presence",r.POSTGRES_CHANGES="postgres_changes",r.SYSTEM="system"})(Ft||(Ft={}));var z;(function(r){r.SUBSCRIBED="SUBSCRIBED",r.TIMED_OUT="TIMED_OUT",r.CLOSED="CLOSED",r.CHANNEL_ERROR="CHANNEL_ERROR"})(z||(z={}));class kt{constructor(e,t={config:{}},s){this.topic=e,this.params=t,this.socket=s,this.bindings={},this.state=I.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new at(this,F.join,this.params,this.timeout),this.rejoinTimer=new Ns(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=I.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(n=>n.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=I.closed,this.socket._remove(this)}),this._onError(n=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,n),this.state=I.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=I.errored,this.rejoinTimer.scheduleTimeout())}),this._on(F.reply,{},(n,i)=>{this._trigger(this._replyEventName(i),n)}),this.presence=new Oe(this),this.broadcastEndpointURL=Es(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(e,t=this.timeout){var s,n;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{const{config:{broadcast:i,presence:o,private:l}}=this.params;this._onError(d=>e==null?void 0:e(z.CHANNEL_ERROR,d)),this._onClose(()=>e==null?void 0:e(z.CLOSED));const c={},u={broadcast:i,presence:o,postgres_changes:(n=(s=this.bindings.postgres_changes)===null||s===void 0?void 0:s.map(d=>d.filter))!==null&&n!==void 0?n:[],private:l};this.socket.accessTokenValue&&(c.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:u},c)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",async({postgres_changes:d})=>{var h;if(this.socket.setAuth(),d===void 0){e==null||e(z.SUBSCRIBED);return}else{const f=this.bindings.postgres_changes,m=(h=f==null?void 0:f.length)!==null&&h!==void 0?h:0,p=[];for(let b=0;b<m;b++){const w=f[b],{filter:{event:j,schema:A,table:O,filter:E}}=w,k=d&&d[b];if(k&&k.event===j&&k.schema===A&&k.table===O&&k.filter===E)p.push(Object.assign(Object.assign({},w),{id:k.id}));else{this.unsubscribe(),e==null||e(z.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=p,e&&e(z.SUBSCRIBED);return}}).receive("error",d=>{e==null||e(z.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(d).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(z.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,t={}){return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,t,s){return this._on(e,t,s)}async send(e,t={}){var s,n;if(!this._canPush()&&e.type==="broadcast"){const{event:i,payload:o}=e,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:o,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(s=t.timeout)!==null&&s!==void 0?s:this.timeout);return await((n=u.body)===null||n===void 0?void 0:n.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var o,l,c;const u=this._push(e.type,e,t.timeout||this.timeout);e.type==="broadcast"&&!(!((c=(l=(o=this.params)===null||o===void 0?void 0:o.config)===null||l===void 0?void 0:l.broadcast)===null||c===void 0)&&c.ack)&&i("ok"),u.receive("ok",()=>i("ok")),u.receive("error",()=>i("error")),u.receive("timeout",()=>i("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=I.leaving;const t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(F.close,"leave",this._joinRef())};return this.rejoinTimer.reset(),this.joinPush.destroy(),new Promise(s=>{const n=new at(this,F.leave,{},e);n.receive("ok",()=>{t(),s("ok")}).receive("timeout",()=>{t(),s("timed out")}).receive("error",()=>{s("error")}),n.send(),this._canPush()||n.trigger("ok",{})})}async _fetchWithTimeout(e,t,s){const n=new AbortController,i=setTimeout(()=>n.abort(),s),o=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:n.signal}));return clearTimeout(i),o}_push(e,t,s=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let n=new at(this,e,t,s);return this._canPush()?n.send():(n.startTimeout(),this.pushBuffer.push(n)),n}_onMessage(e,t,s){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,s){var n,i;const o=e.toLocaleLowerCase(),{close:l,error:c,leave:u,join:d}=F;if(s&&[l,c,u,d].indexOf(o)>=0&&s!==this._joinRef())return;let f=this._onMessage(o,t,s);if(t&&!f)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(n=this.bindings.postgres_changes)===null||n===void 0||n.filter(m=>{var p,b,w;return((p=m.filter)===null||p===void 0?void 0:p.event)==="*"||((w=(b=m.filter)===null||b===void 0?void 0:b.event)===null||w===void 0?void 0:w.toLocaleLowerCase())===o}).map(m=>m.callback(f,s)):(i=this.bindings[o])===null||i===void 0||i.filter(m=>{var p,b,w,j,A,O;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in m){const E=m.id,k=(p=m.filter)===null||p===void 0?void 0:p.event;return E&&((b=t.ids)===null||b===void 0?void 0:b.includes(E))&&(k==="*"||(k==null?void 0:k.toLocaleLowerCase())===((w=t.data)===null||w===void 0?void 0:w.type.toLocaleLowerCase()))}else{const E=(A=(j=m==null?void 0:m.filter)===null||j===void 0?void 0:j.event)===null||A===void 0?void 0:A.toLocaleLowerCase();return E==="*"||E===((O=t==null?void 0:t.event)===null||O===void 0?void 0:O.toLocaleLowerCase())}else return m.type.toLocaleLowerCase()===o}).map(m=>{if(typeof f=="object"&&"ids"in f){const p=f.data,{schema:b,table:w,commit_timestamp:j,type:A,errors:O}=p;f=Object.assign(Object.assign({},{schema:b,table:w,commit_timestamp:j,eventType:A,new:{},old:{},errors:O}),this._getPayloadRecords(p))}m.callback(f,s)})}_isClosed(){return this.state===I.closed}_isJoined(){return this.state===I.joined}_isJoining(){return this.state===I.joining}_isLeaving(){return this.state===I.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,s){const n=e.toLocaleLowerCase(),i={type:n,filter:t,callback:s};return this.bindings[n]?this.bindings[n].push(i):this.bindings[n]=[i],this}_off(e,t){const s=e.toLocaleLowerCase();return this.bindings[s]=this.bindings[s].filter(n=>{var i;return!(((i=n.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===s&&kt.isEqual(n.filter,t))}),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const s in e)if(e[s]!==t[s])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(F.close,{},e)}_onError(e){this._on(F.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=I.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(t.new=Mt(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(t.old=Mt(e.columns,e.old_record)),t}}const Mn=()=>{},Un=typeof WebSocket<"u",Bn=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class Fn{constructor(e,t){var s;this.accessTokenValue=null,this.apiKey=null,this.channels=[],this.endPoint="",this.httpEndpoint="",this.headers=En,this.params={},this.timeout=Ss,this.heartbeatIntervalMs=3e4,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.ref=0,this.logger=Mn,this.conn=null,this.sendBuffer=[],this.serializer=new Cn,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=i=>{let o;return i?o=i:typeof fetch>"u"?o=(...l)=>be(async()=>{const{default:c}=await Promise.resolve().then(()=>we);return{default:c}},void 0).then(({default:c})=>c(...l)):o=fetch,(...l)=>o(...l)},this.endPoint=`${e}/${mt.websocket}`,this.httpEndpoint=Es(e),t!=null&&t.transport?this.transport=t.transport:this.transport=null,t!=null&&t.params&&(this.params=t.params),t!=null&&t.headers&&(this.headers=Object.assign(Object.assign({},this.headers),t.headers)),t!=null&&t.timeout&&(this.timeout=t.timeout),t!=null&&t.logger&&(this.logger=t.logger),t!=null&&t.heartbeatIntervalMs&&(this.heartbeatIntervalMs=t.heartbeatIntervalMs);const n=(s=t==null?void 0:t.params)===null||s===void 0?void 0:s.apikey;if(n&&(this.accessTokenValue=n,this.apiKey=n),this.reconnectAfterMs=t!=null&&t.reconnectAfterMs?t.reconnectAfterMs:i=>[1e3,2e3,5e3,1e4][i-1]||1e4,this.encode=t!=null&&t.encode?t.encode:(i,o)=>o(JSON.stringify(i)),this.decode=t!=null&&t.decode?t.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new Ns(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(t==null?void 0:t.fetch),t!=null&&t.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(t==null?void 0:t.worker)||!1,this.workerUrl=t==null?void 0:t.workerUrl}this.accessToken=(t==null?void 0:t.accessToken)||null}connect(){if(!this.conn){if(this.transport){this.conn=new this.transport(this.endpointURL(),void 0,{headers:this.headers});return}if(Un){this.conn=new WebSocket(this.endpointURL()),this.setupConnection();return}this.conn=new qn(this.endpointURL(),void 0,{close:()=>{this.conn=null}}),be(async()=>{const{default:e}=await import("./browser-DOKjY0TJ.js").then(t=>t.b);return{default:e}},__vite__mapDeps([0,1])).then(({default:e})=>{this.conn=new e(this.endpointURL(),void 0,{headers:this.headers}),this.setupConnection()})}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:Tn}))}disconnect(e,t){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,t??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset())}getChannels(){return this.channels}async removeChannel(e){const t=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),t}async removeAllChannels(){const e=await Promise.all(this.channels.map(t=>t.unsubscribe()));return this.disconnect(),e}log(e,t,s){this.logger(e,t,s)}connectionState(){switch(this.conn&&this.conn.readyState){case ye.connecting:return oe.Connecting;case ye.open:return oe.Open;case ye.closing:return oe.Closing;default:return oe.Closed}}isConnected(){return this.connectionState()===oe.Open}channel(e,t={config:{}}){const s=new kt(`realtime:${e}`,t,this);return this.channels.push(s),s}push(e){const{topic:t,event:s,payload:n,ref:i}=e,o=()=>{this.encode(e,l=>{var c;(c=this.conn)===null||c===void 0||c.send(l)})};this.log("push",`${t} ${s} (${i})`,n),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(e=null){let t=e||this.accessToken&&await this.accessToken()||this.accessTokenValue;if(t){let s=null;try{s=JSON.parse(atob(t.split(".")[1]))}catch{}if(s&&s.exp&&!(Math.floor(Date.now()/1e3)-s.exp<0))return this.log("auth",`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${s.exp}`),Promise.reject(`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${s.exp}`);this.accessTokenValue=t,this.channels.forEach(n=>{t&&n.updateJoinPayload({access_token:t}),n.joinedOnce&&n._isJoined()&&n._push(F.access_token,{access_token:t})})}}async sendHeartbeat(){var e;if(this.isConnected()){if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),(e=this.conn)===null||e===void 0||e.close(On,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.setAuth()}}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(s=>s.topic===e&&(s._isJoined()||s._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t._joinRef()!==e._joinRef())}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_onConnMessage(e){this.decode(e.data,t=>{let{topic:s,event:n,payload:i,ref:o}=t;o&&o===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${i.status||""} ${s} ${n} ${o&&"("+o+")"||""}`,i),this.channels.filter(l=>l._isMember(s)).forEach(l=>l._trigger(n,i,o)),this.stateChangeCallbacks.message.forEach(l=>l(t))})}async _onConnOpen(){if(this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),!this.worker)this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs);else{this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=t=>{this.log("worker","worker error",t.message),this.workerRef.terminate()},this.workerRef.onmessage=t=>{t.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}this.stateChangeCallbacks.open.forEach(e=>e())}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(t=>t(e))}_onConnError(e){this.log("transport",e.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(t=>t(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger(F.error))}_appendParams(e,t){if(Object.keys(t).length===0)return e;const s=e.match(/\?/)?"&":"?",n=new URLSearchParams(t);return`${e}${s}${n}`}_workerObjectUrl(e){let t;if(e)t=e;else{const s=new Blob([Bn],{type:"application/javascript"});t=URL.createObjectURL(s)}return t}}class qn{constructor(e,t,s){this.binaryType="arraybuffer",this.onclose=()=>{},this.onerror=()=>{},this.onmessage=()=>{},this.onopen=()=>{},this.readyState=ye.connecting,this.send=()=>{},this.url=null,this.url=e,this.close=s.close}}class St extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function C(r){return typeof r=="object"&&r!==null&&"__isStorageError"in r}class Wn extends St{constructor(e,t){super(e),this.name="StorageApiError",this.status=t}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class pt extends St{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}var Hn=function(r,e,t,s){function n(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function l(d){try{u(s.next(d))}catch(h){o(h)}}function c(d){try{u(s.throw(d))}catch(h){o(h)}}function u(d){d.done?i(d.value):n(d.value).then(l,c)}u((s=s.apply(r,e||[])).next())})};const Ts=r=>{let e;return r?e=r:typeof fetch>"u"?e=(...t)=>be(async()=>{const{default:s}=await Promise.resolve().then(()=>we);return{default:s}},void 0).then(({default:s})=>s(...t)):e=fetch,(...t)=>e(...t)},zn=()=>Hn(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield be(()=>Promise.resolve().then(()=>we),void 0)).Response:Response}),yt=r=>{if(Array.isArray(r))return r.map(t=>yt(t));if(typeof r=="function"||r!==Object(r))return r;const e={};return Object.entries(r).forEach(([t,s])=>{const n=t.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));e[n]=yt(s)}),e};var ue=function(r,e,t,s){function n(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function l(d){try{u(s.next(d))}catch(h){o(h)}}function c(d){try{u(s.throw(d))}catch(h){o(h)}}function u(d){d.done?i(d.value):n(d.value).then(l,c)}u((s=s.apply(r,e||[])).next())})};const ot=r=>r.msg||r.message||r.error_description||r.error||JSON.stringify(r),Gn=(r,e,t)=>ue(void 0,void 0,void 0,function*(){const s=yield zn();r instanceof s&&!(t!=null&&t.noResolveJson)?r.json().then(n=>{e(new Wn(ot(n),r.status||500))}).catch(n=>{e(new pt(ot(n),n))}):e(new pt(ot(r),r))}),Jn=(r,e,t,s)=>{const n={method:r,headers:(e==null?void 0:e.headers)||{}};return r==="GET"?n:(n.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),s&&(n.body=JSON.stringify(s)),Object.assign(Object.assign({},n),t))};function Le(r,e,t,s,n,i){return ue(this,void 0,void 0,function*(){return new Promise((o,l)=>{r(t,Jn(e,s,n,i)).then(c=>{if(!c.ok)throw c;return s!=null&&s.noResolveJson?c:c.json()}).then(c=>o(c)).catch(c=>Gn(c,l,s))})})}function Je(r,e,t,s){return ue(this,void 0,void 0,function*(){return Le(r,"GET",e,t,s)})}function Q(r,e,t,s,n){return ue(this,void 0,void 0,function*(){return Le(r,"POST",e,s,n,t)})}function Vn(r,e,t,s,n){return ue(this,void 0,void 0,function*(){return Le(r,"PUT",e,s,n,t)})}function Yn(r,e,t,s){return ue(this,void 0,void 0,function*(){return Le(r,"HEAD",e,Object.assign(Object.assign({},t),{noResolveJson:!0}),s)})}function Os(r,e,t,s,n){return ue(this,void 0,void 0,function*(){return Le(r,"DELETE",e,s,n,t)})}var D=function(r,e,t,s){function n(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function l(d){try{u(s.next(d))}catch(h){o(h)}}function c(d){try{u(s.throw(d))}catch(h){o(h)}}function u(d){d.done?i(d.value):n(d.value).then(l,c)}u((s=s.apply(r,e||[])).next())})};const Kn={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},qt={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class Qn{constructor(e,t={},s,n){this.url=e,this.headers=t,this.bucketId=s,this.fetch=Ts(n)}uploadOrUpdate(e,t,s,n){return D(this,void 0,void 0,function*(){try{let i;const o=Object.assign(Object.assign({},qt),n);let l=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(o.upsert)});const c=o.metadata;typeof Blob<"u"&&s instanceof Blob?(i=new FormData,i.append("cacheControl",o.cacheControl),c&&i.append("metadata",this.encodeMetadata(c)),i.append("",s)):typeof FormData<"u"&&s instanceof FormData?(i=s,i.append("cacheControl",o.cacheControl),c&&i.append("metadata",this.encodeMetadata(c))):(i=s,l["cache-control"]=`max-age=${o.cacheControl}`,l["content-type"]=o.contentType,c&&(l["x-metadata"]=this.toBase64(this.encodeMetadata(c)))),n!=null&&n.headers&&(l=Object.assign(Object.assign({},l),n.headers));const u=this._removeEmptyFolders(t),d=this._getFinalPath(u),h=yield this.fetch(`${this.url}/object/${d}`,Object.assign({method:e,body:i,headers:l},o!=null&&o.duplex?{duplex:o.duplex}:{})),f=yield h.json();return h.ok?{data:{path:u,id:f.Id,fullPath:f.Key},error:null}:{data:null,error:f}}catch(i){if(C(i))return{data:null,error:i};throw i}})}upload(e,t,s){return D(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,s)})}uploadToSignedUrl(e,t,s,n){return D(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(e),o=this._getFinalPath(i),l=new URL(this.url+`/object/upload/sign/${o}`);l.searchParams.set("token",t);try{let c;const u=Object.assign({upsert:qt.upsert},n),d=Object.assign(Object.assign({},this.headers),{"x-upsert":String(u.upsert)});typeof Blob<"u"&&s instanceof Blob?(c=new FormData,c.append("cacheControl",u.cacheControl),c.append("",s)):typeof FormData<"u"&&s instanceof FormData?(c=s,c.append("cacheControl",u.cacheControl)):(c=s,d["cache-control"]=`max-age=${u.cacheControl}`,d["content-type"]=u.contentType);const h=yield this.fetch(l.toString(),{method:"PUT",body:c,headers:d}),f=yield h.json();return h.ok?{data:{path:i,fullPath:f.Key},error:null}:{data:null,error:f}}catch(c){if(C(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(e,t){return D(this,void 0,void 0,function*(){try{let s=this._getFinalPath(e);const n=Object.assign({},this.headers);t!=null&&t.upsert&&(n["x-upsert"]="true");const i=yield Q(this.fetch,`${this.url}/object/upload/sign/${s}`,{},{headers:n}),o=new URL(this.url+i.url),l=o.searchParams.get("token");if(!l)throw new St("No token returned by API");return{data:{signedUrl:o.toString(),path:e,token:l},error:null}}catch(s){if(C(s))return{data:null,error:s};throw s}})}update(e,t,s){return D(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,s)})}move(e,t,s){return D(this,void 0,void 0,function*(){try{return{data:yield Q(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:s==null?void 0:s.destinationBucket},{headers:this.headers}),error:null}}catch(n){if(C(n))return{data:null,error:n};throw n}})}copy(e,t,s){return D(this,void 0,void 0,function*(){try{return{data:{path:(yield Q(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:s==null?void 0:s.destinationBucket},{headers:this.headers})).Key},error:null}}catch(n){if(C(n))return{data:null,error:n};throw n}})}createSignedUrl(e,t,s){return D(this,void 0,void 0,function*(){try{let n=this._getFinalPath(e),i=yield Q(this.fetch,`${this.url}/object/sign/${n}`,Object.assign({expiresIn:t},s!=null&&s.transform?{transform:s.transform}:{}),{headers:this.headers});const o=s!=null&&s.download?`&download=${s.download===!0?"":s.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${o}`)},{data:i,error:null}}catch(n){if(C(n))return{data:null,error:n};throw n}})}createSignedUrls(e,t,s){return D(this,void 0,void 0,function*(){try{const n=yield Q(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:t,paths:e},{headers:this.headers}),i=s!=null&&s.download?`&download=${s.download===!0?"":s.download}`:"";return{data:n.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${i}`):null})),error:null}}catch(n){if(C(n))return{data:null,error:n};throw n}})}download(e,t){return D(this,void 0,void 0,function*(){const n=typeof(t==null?void 0:t.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((t==null?void 0:t.transform)||{}),o=i?`?${i}`:"";try{const l=this._getFinalPath(e);return{data:yield(yield Je(this.fetch,`${this.url}/${n}/${l}${o}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(l){if(C(l))return{data:null,error:l};throw l}})}info(e){return D(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{const s=yield Je(this.fetch,`${this.url}/object/info/${t}`,{headers:this.headers});return{data:yt(s),error:null}}catch(s){if(C(s))return{data:null,error:s};throw s}})}exists(e){return D(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{return yield Yn(this.fetch,`${this.url}/object/${t}`,{headers:this.headers}),{data:!0,error:null}}catch(s){if(C(s)&&s instanceof pt){const n=s.originalError;if([400,404].includes(n==null?void 0:n.status))return{data:!1,error:s}}throw s}})}getPublicUrl(e,t){const s=this._getFinalPath(e),n=[],i=t!=null&&t.download?`download=${t.download===!0?"":t.download}`:"";i!==""&&n.push(i);const l=typeof(t==null?void 0:t.transform)<"u"?"render/image":"object",c=this.transformOptsToQueryString((t==null?void 0:t.transform)||{});c!==""&&n.push(c);let u=n.join("&");return u!==""&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${s}${u}`)}}}remove(e){return D(this,void 0,void 0,function*(){try{return{data:yield Os(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(t){if(C(t))return{data:null,error:t};throw t}})}list(e,t,s){return D(this,void 0,void 0,function*(){try{const n=Object.assign(Object.assign(Object.assign({},Kn),t),{prefix:e||""});return{data:yield Q(this.fetch,`${this.url}/object/list/${this.bucketId}`,n,{headers:this.headers},s),error:null}}catch(n){if(C(n))return{data:null,error:n};throw n}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}}const Xn="2.7.1",Zn={"X-Client-Info":`storage-js/${Xn}`};var fe=function(r,e,t,s){function n(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function l(d){try{u(s.next(d))}catch(h){o(h)}}function c(d){try{u(s.throw(d))}catch(h){o(h)}}function u(d){d.done?i(d.value):n(d.value).then(l,c)}u((s=s.apply(r,e||[])).next())})};class ei{constructor(e,t={},s){this.url=e,this.headers=Object.assign(Object.assign({},Zn),t),this.fetch=Ts(s)}listBuckets(){return fe(this,void 0,void 0,function*(){try{return{data:yield Je(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(C(e))return{data:null,error:e};throw e}})}getBucket(e){return fe(this,void 0,void 0,function*(){try{return{data:yield Je(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(t){if(C(t))return{data:null,error:t};throw t}})}createBucket(e,t={public:!1}){return fe(this,void 0,void 0,function*(){try{return{data:yield Q(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(C(s))return{data:null,error:s};throw s}})}updateBucket(e,t){return fe(this,void 0,void 0,function*(){try{return{data:yield Vn(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(C(s))return{data:null,error:s};throw s}})}emptyBucket(e){return fe(this,void 0,void 0,function*(){try{return{data:yield Q(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(t){if(C(t))return{data:null,error:t};throw t}})}deleteBucket(e){return fe(this,void 0,void 0,function*(){try{return{data:yield Os(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(C(t))return{data:null,error:t};throw t}})}}class ti extends ei{constructor(e,t={},s){super(e,t,s)}from(e){return new Qn(this.url,this.headers,e,this.fetch)}}const si="2.48.0";let Ee="";typeof Deno<"u"?Ee="deno":typeof document<"u"?Ee="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Ee="react-native":Ee="node";const ri={"X-Client-Info":`supabase-js-${Ee}/${si}`},ni={headers:ri},ii={schema:"public"},ai={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},oi={};var li=function(r,e,t,s){function n(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function l(d){try{u(s.next(d))}catch(h){o(h)}}function c(d){try{u(s.throw(d))}catch(h){o(h)}}function u(d){d.done?i(d.value):n(d.value).then(l,c)}u((s=s.apply(r,e||[])).next())})};const ci=r=>{let e;return r?e=r:typeof fetch>"u"?e=ms:e=fetch,(...t)=>e(...t)},di=()=>typeof Headers>"u"?gs:Headers,ui=(r,e,t)=>{const s=ci(t),n=di();return(i,o)=>li(void 0,void 0,void 0,function*(){var l;const c=(l=yield e())!==null&&l!==void 0?l:r;let u=new n(o==null?void 0:o.headers);return u.has("apikey")||u.set("apikey",r),u.has("Authorization")||u.set("Authorization",`Bearer ${c}`),s(i,Object.assign(Object.assign({},o),{headers:u}))})};var hi=function(r,e,t,s){function n(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function l(d){try{u(s.next(d))}catch(h){o(h)}}function c(d){try{u(s.throw(d))}catch(h){o(h)}}function u(d){d.done?i(d.value):n(d.value).then(l,c)}u((s=s.apply(r,e||[])).next())})};function fi(r){return r.replace(/\/$/,"")}function mi(r,e){const{db:t,auth:s,realtime:n,global:i}=r,{db:o,auth:l,realtime:c,global:u}=e,d={db:Object.assign(Object.assign({},o),t),auth:Object.assign(Object.assign({},l),s),realtime:Object.assign(Object.assign({},c),n),global:Object.assign(Object.assign({},u),i),accessToken:()=>hi(this,void 0,void 0,function*(){return""})};return r.accessToken?d.accessToken=r.accessToken:delete d.accessToken,d}const Cs="2.67.3",gi="http://localhost:9999",pi="supabase.auth.token",yi={"X-Client-Info":`gotrue-js/${Cs}`},Wt=10,bt="X-Supabase-Api-Version",$s={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}};function bi(r){return Math.round(Date.now()/1e3)+r}function vi(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(r){const e=Math.random()*16|0;return(r=="x"?e:e&3|8).toString(16)})}const W=()=>typeof window<"u"&&typeof document<"u",ne={tested:!1,writable:!1},Ce=()=>{if(!W())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(ne.tested)return ne.writable;const r=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(r,r),globalThis.localStorage.removeItem(r),ne.tested=!0,ne.writable=!0}catch{ne.tested=!0,ne.writable=!1}return ne.writable};function wi(r){const e={},t=new URL(r);if(t.hash&&t.hash[0]==="#")try{new URLSearchParams(t.hash.substring(1)).forEach((n,i)=>{e[i]=n})}catch{}return t.searchParams.forEach((s,n)=>{e[n]=s}),e}const As=r=>{let e;return r?e=r:typeof fetch>"u"?e=(...t)=>be(async()=>{const{default:s}=await Promise.resolve().then(()=>we);return{default:s}},void 0).then(({default:s})=>s(...t)):e=fetch,(...t)=>e(...t)},xi=r=>typeof r=="object"&&r!==null&&"status"in r&&"ok"in r&&"json"in r&&typeof r.json=="function",Rs=async(r,e,t)=>{await r.setItem(e,JSON.stringify(t))},Be=async(r,e)=>{const t=await r.getItem(e);if(!t)return null;try{return JSON.parse(t)}catch{return t}},Fe=async(r,e)=>{await r.removeItem(e)};function _i(r){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let t="",s,n,i,o,l,c,u,d=0;for(r=r.replace("-","+").replace("_","/");d<r.length;)o=e.indexOf(r.charAt(d++)),l=e.indexOf(r.charAt(d++)),c=e.indexOf(r.charAt(d++)),u=e.indexOf(r.charAt(d++)),s=o<<2|l>>4,n=(l&15)<<4|c>>2,i=(c&3)<<6|u,t=t+String.fromCharCode(s),c!=64&&n!=0&&(t=t+String.fromCharCode(n)),u!=64&&i!=0&&(t=t+String.fromCharCode(i));return t}class st{constructor(){this.promise=new st.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}st.promiseConstructor=Promise;function Ht(r){const e=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}=?$|[a-z0-9_-]{2}(==)?$)$/i,t=r.split(".");if(t.length!==3)throw new Error("JWT is not valid: not a JWT structure");if(!e.test(t[1]))throw new Error("JWT is not valid: payload is not in base64url format");const s=t[1];return JSON.parse(_i(s))}async function ji(r){return await new Promise(e=>{setTimeout(()=>e(null),r)})}function ki(r,e){return new Promise((s,n)=>{(async()=>{for(let i=0;i<1/0;i++)try{const o=await r(i);if(!e(i,null,o)){s(o);return}}catch(o){if(!e(i,o)){n(o);return}}})()})}function Si(r){return("0"+r.toString(16)).substr(-2)}function Ni(){const e=new Uint32Array(56);if(typeof crypto>"u"){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",s=t.length;let n="";for(let i=0;i<56;i++)n+=t.charAt(Math.floor(Math.random()*s));return n}return crypto.getRandomValues(e),Array.from(e,Si).join("")}async function Pi(r){const t=new TextEncoder().encode(r),s=await crypto.subtle.digest("SHA-256",t),n=new Uint8Array(s);return Array.from(n).map(i=>String.fromCharCode(i)).join("")}function Ei(r){return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Ti(r){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),r;const t=await Pi(r);return Ei(t)}async function me(r,e,t=!1){const s=Ni();let n=s;t&&(n+="/PASSWORD_RECOVERY"),await Rs(r,`${e}-code-verifier`,n);const i=await Ti(s);return[i,s===i?"plain":"s256"]}const Oi=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function Ci(r){const e=r.headers.get(bt);if(!e||!e.match(Oi))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}class Nt extends Error{constructor(e,t,s){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=s}}function v(r){return typeof r=="object"&&r!==null&&"__isAuthError"in r}class $i extends Nt{constructor(e,t,s){super(e,t,s),this.name="AuthApiError",this.status=t,this.code=s}}function Ai(r){return v(r)&&r.name==="AuthApiError"}class Ds extends Nt{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class he extends Nt{constructor(e,t,s,n){super(e,s,n),this.name=t,this.status=s}}class Y extends he{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function Ri(r){return v(r)&&r.name==="AuthSessionMissingError"}class lt extends he{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class qe extends he{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class We extends he{constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function Di(r){return v(r)&&r.name==="AuthImplicitGrantRedirectError"}class zt extends he{constructor(e,t=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class vt extends he{constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}}function ct(r){return v(r)&&r.name==="AuthRetryableFetchError"}class Gt extends he{constructor(e,t,s){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=s}}var Li=function(r,e){var t={};for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&e.indexOf(s)<0&&(t[s]=r[s]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,s=Object.getOwnPropertySymbols(r);n<s.length;n++)e.indexOf(s[n])<0&&Object.prototype.propertyIsEnumerable.call(r,s[n])&&(t[s[n]]=r[s[n]]);return t};const ie=r=>r.msg||r.message||r.error_description||r.error||JSON.stringify(r),Ii=[502,503,504];async function Jt(r){var e;if(!xi(r))throw new vt(ie(r),0);if(Ii.includes(r.status))throw new vt(ie(r),r.status);let t;try{t=await r.json()}catch(i){throw new Ds(ie(i),i)}let s;const n=Ci(r);if(n&&n.getTime()>=$s["2024-01-01"].timestamp&&typeof t=="object"&&t&&typeof t.code=="string"?s=t.code:typeof t=="object"&&t&&typeof t.error_code=="string"&&(s=t.error_code),s){if(s==="weak_password")throw new Gt(ie(t),r.status,((e=t.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(s==="session_not_found")throw new Y}else if(typeof t=="object"&&t&&typeof t.weak_password=="object"&&t.weak_password&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.reasons.reduce((i,o)=>i&&typeof o=="string",!0))throw new Gt(ie(t),r.status,t.weak_password.reasons);throw new $i(ie(t),r.status||500,s)}const Mi=(r,e,t,s)=>{const n={method:r,headers:(e==null?void 0:e.headers)||{}};return r==="GET"?n:(n.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),n.body=JSON.stringify(s),Object.assign(Object.assign({},n),t))};async function x(r,e,t,s){var n;const i=Object.assign({},s==null?void 0:s.headers);i[bt]||(i[bt]=$s["2024-01-01"].name),s!=null&&s.jwt&&(i.Authorization=`Bearer ${s.jwt}`);const o=(n=s==null?void 0:s.query)!==null&&n!==void 0?n:{};s!=null&&s.redirectTo&&(o.redirect_to=s.redirectTo);const l=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",c=await Ui(r,e,t+l,{headers:i,noResolveJson:s==null?void 0:s.noResolveJson},{},s==null?void 0:s.body);return s!=null&&s.xform?s==null?void 0:s.xform(c):{data:Object.assign({},c),error:null}}async function Ui(r,e,t,s,n,i){const o=Mi(e,s,n,i);let l;try{l=await r(t,Object.assign({},o))}catch(c){throw console.error(c),new vt(ie(c),0)}if(l.ok||await Jt(l),s!=null&&s.noResolveJson)return l;try{return await l.json()}catch(c){await Jt(c)}}function K(r){var e;let t=null;Wi(r)&&(t=Object.assign({},r),r.expires_at||(t.expires_at=bi(r.expires_in)));const s=(e=r.user)!==null&&e!==void 0?e:r;return{data:{session:t,user:s},error:null}}function Vt(r){const e=K(r);return!e.error&&r.weak_password&&typeof r.weak_password=="object"&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.message&&typeof r.weak_password.message=="string"&&r.weak_password.reasons.reduce((t,s)=>t&&typeof s=="string",!0)&&(e.data.weak_password=r.weak_password),e}function Z(r){var e;return{data:{user:(e=r.user)!==null&&e!==void 0?e:r},error:null}}function Bi(r){return{data:r,error:null}}function Fi(r){const{action_link:e,email_otp:t,hashed_token:s,redirect_to:n,verification_type:i}=r,o=Li(r,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:e,email_otp:t,hashed_token:s,redirect_to:n,verification_type:i},c=Object.assign({},o);return{data:{properties:l,user:c},error:null}}function qi(r){return r}function Wi(r){return r.access_token&&r.refresh_token&&r.expires_in}var Hi=function(r,e){var t={};for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&e.indexOf(s)<0&&(t[s]=r[s]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,s=Object.getOwnPropertySymbols(r);n<s.length;n++)e.indexOf(s[n])<0&&Object.prototype.propertyIsEnumerable.call(r,s[n])&&(t[s[n]]=r[s[n]]);return t};class zi{constructor({url:e="",headers:t={},fetch:s}){this.url=e,this.headers=t,this.fetch=As(s),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,t="global"){try{return await x(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(s){if(v(s))return{data:null,error:s};throw s}}async inviteUserByEmail(e,t={}){try{return await x(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:Z})}catch(s){if(v(s))return{data:{user:null},error:s};throw s}}async generateLink(e){try{const{options:t}=e,s=Hi(e,["options"]),n=Object.assign(Object.assign({},s),t);return"newEmail"in s&&(n.new_email=s==null?void 0:s.newEmail,delete n.newEmail),await x(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:n,headers:this.headers,xform:Fi,redirectTo:t==null?void 0:t.redirectTo})}catch(t){if(v(t))return{data:{properties:null,user:null},error:t};throw t}}async createUser(e){try{return await x(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Z})}catch(t){if(v(t))return{data:{user:null},error:t};throw t}}async listUsers(e){var t,s,n,i,o,l,c;try{const u={nextPage:null,lastPage:0,total:0},d=await x(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(s=(t=e==null?void 0:e.page)===null||t===void 0?void 0:t.toString())!==null&&s!==void 0?s:"",per_page:(i=(n=e==null?void 0:e.perPage)===null||n===void 0?void 0:n.toString())!==null&&i!==void 0?i:""},xform:qi});if(d.error)throw d.error;const h=await d.json(),f=(o=d.headers.get("x-total-count"))!==null&&o!==void 0?o:0,m=(c=(l=d.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return m.length>0&&(m.forEach(p=>{const b=parseInt(p.split(";")[0].split("=")[1].substring(0,1)),w=JSON.parse(p.split(";")[1].split("=")[1]);u[`${w}Page`]=b}),u.total=parseInt(f)),{data:Object.assign(Object.assign({},h),u),error:null}}catch(u){if(v(u))return{data:{users:[]},error:u};throw u}}async getUserById(e){try{return await x(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Z})}catch(t){if(v(t))return{data:{user:null},error:t};throw t}}async updateUserById(e,t){try{return await x(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:Z})}catch(s){if(v(s))return{data:{user:null},error:s};throw s}}async deleteUser(e,t=!1){try{return await x(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:Z})}catch(s){if(v(s))return{data:{user:null},error:s};throw s}}async _listFactors(e){try{const{data:t,error:s}=await x(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:n=>({data:{factors:n},error:null})});return{data:t,error:s}}catch(t){if(v(t))return{data:null,error:t};throw t}}async _deleteFactor(e){try{return{data:await x(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(t){if(v(t))return{data:null,error:t};throw t}}}const Gi={getItem:r=>Ce()?globalThis.localStorage.getItem(r):null,setItem:(r,e)=>{Ce()&&globalThis.localStorage.setItem(r,e)},removeItem:r=>{Ce()&&globalThis.localStorage.removeItem(r)}};function Yt(r={}){return{getItem:e=>r[e]||null,setItem:(e,t)=>{r[e]=t},removeItem:e=>{delete r[e]}}}function Ji(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const ge={debug:!!(globalThis&&Ce()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Ls extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class Vi extends Ls{}async function Yi(r,e,t){ge.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",r,e);const s=new globalThis.AbortController;return e>0&&setTimeout(()=>{s.abort(),ge.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",r)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(r,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:s.signal},async n=>{if(n){ge.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",r,n.name);try{return await t()}finally{ge.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",r,n.name)}}else{if(e===0)throw ge.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",r),new Vi(`Acquiring an exclusive Navigator LockManager lock "${r}" immediately failed`);if(ge.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await t()}}))}Ji();const Ki={url:gi,storageKey:pi,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:yi,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1},Se=30*1e3,Kt=3;async function Qt(r,e,t){return await t()}class $e{constructor(e){var t,s;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=$e.nextInstanceID,$e.nextInstanceID+=1,this.instanceID>0&&W()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const n=Object.assign(Object.assign({},Ki),e);if(this.logDebugMessages=!!n.debug,typeof n.debug=="function"&&(this.logger=n.debug),this.persistSession=n.persistSession,this.storageKey=n.storageKey,this.autoRefreshToken=n.autoRefreshToken,this.admin=new zi({url:n.url,headers:n.headers,fetch:n.fetch}),this.url=n.url,this.headers=n.headers,this.fetch=As(n.fetch),this.lock=n.lock||Qt,this.detectSessionInUrl=n.detectSessionInUrl,this.flowType=n.flowType,this.hasCustomAuthorizationHeader=n.hasCustomAuthorizationHeader,n.lock?this.lock=n.lock:W()&&(!((t=globalThis==null?void 0:globalThis.navigator)===null||t===void 0)&&t.locks)?this.lock=Yi:this.lock=Qt,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?n.storage?this.storage=n.storage:Ce()?this.storage=Gi:(this.memoryStorage={},this.storage=Yt(this.memoryStorage)):(this.memoryStorage={},this.storage=Yt(this.memoryStorage)),W()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(s=this.broadcastChannel)===null||s===void 0||s.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${Cs}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const t=wi(window.location.href);let s="none";if(this._isImplicitGrantCallback(t)?s="implicit":await this._isPKCECallback(t)&&(s="pkce"),W()&&this.detectSessionInUrl&&s!=="none"){const{data:n,error:i}=await this._getSessionFromURL(t,s);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),Di(i)){const c=(e=i.details)===null||e===void 0?void 0:e.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:o,redirectType:l}=n;return this._debug("#_initialize()","detected session in URL",o,"redirect type",l),await this._saveSession(o),setTimeout(async()=>{l==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(t){return v(t)?{error:t}:{error:new Ds("Unexpected error during initialization",t)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var t,s,n;try{const i=await x(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(s=(t=e==null?void 0:e.options)===null||t===void 0?void 0:t.data)!==null&&s!==void 0?s:{},gotrue_meta_security:{captcha_token:(n=e==null?void 0:e.options)===null||n===void 0?void 0:n.captchaToken}},xform:K}),{data:o,error:l}=i;if(l||!o)return{data:{user:null,session:null},error:l};const c=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(i){if(v(i))return{data:{user:null,session:null},error:i};throw i}}async signUp(e){var t,s,n;try{let i;if("email"in e){const{email:d,password:h,options:f}=e;let m=null,p=null;this.flowType==="pkce"&&([m,p]=await me(this.storage,this.storageKey)),i=await x(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:f==null?void 0:f.emailRedirectTo,body:{email:d,password:h,data:(t=f==null?void 0:f.data)!==null&&t!==void 0?t:{},gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken},code_challenge:m,code_challenge_method:p},xform:K})}else if("phone"in e){const{phone:d,password:h,options:f}=e;i=await x(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:d,password:h,data:(s=f==null?void 0:f.data)!==null&&s!==void 0?s:{},channel:(n=f==null?void 0:f.channel)!==null&&n!==void 0?n:"sms",gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken}},xform:K})}else throw new qe("You must provide either an email or phone number and a password");const{data:o,error:l}=i;if(l||!o)return{data:{user:null,session:null},error:l};const c=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(i){if(v(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(e){try{let t;if("email"in e){const{email:i,password:o,options:l}=e;t=await x(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:Vt})}else if("phone"in e){const{phone:i,password:o,options:l}=e;t=await x(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:Vt})}else throw new qe("You must provide either an email or phone number and a password");const{data:s,error:n}=t;return n?{data:{user:null,session:null},error:n}:!s||!s.session||!s.user?{data:{user:null,session:null},error:new lt}:(s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),{data:Object.assign({user:s.user,session:s.session},s.weak_password?{weakPassword:s.weak_password}:null),error:n})}catch(t){if(v(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOAuth(e){var t,s,n,i;return await this._handleProviderSignIn(e.provider,{redirectTo:(t=e.options)===null||t===void 0?void 0:t.redirectTo,scopes:(s=e.options)===null||s===void 0?void 0:s.scopes,queryParams:(n=e.options)===null||n===void 0?void 0:n.queryParams,skipBrowserRedirect:(i=e.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async _exchangeCodeForSession(e){const t=await Be(this.storage,`${this.storageKey}-code-verifier`),[s,n]=(t??"").split("/");try{const{data:i,error:o}=await x(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:s},xform:K});if(await Fe(this.storage,`${this.storageKey}-code-verifier`),o)throw o;return!i||!i.session||!i.user?{data:{user:null,session:null,redirectType:null},error:new lt}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign(Object.assign({},i),{redirectType:n??null}),error:o})}catch(i){if(v(i))return{data:{user:null,session:null,redirectType:null},error:i};throw i}}async signInWithIdToken(e){try{const{options:t,provider:s,token:n,access_token:i,nonce:o}=e,l=await x(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:s,id_token:n,access_token:i,nonce:o,gotrue_meta_security:{captcha_token:t==null?void 0:t.captchaToken}},xform:K}),{data:c,error:u}=l;return u?{data:{user:null,session:null},error:u}:!c||!c.session||!c.user?{data:{user:null,session:null},error:new lt}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:c,error:u})}catch(t){if(v(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOtp(e){var t,s,n,i,o;try{if("email"in e){const{email:l,options:c}=e;let u=null,d=null;this.flowType==="pkce"&&([u,d]=await me(this.storage,this.storageKey));const{error:h}=await x(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(t=c==null?void 0:c.data)!==null&&t!==void 0?t:{},create_user:(s=c==null?void 0:c.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:u,code_challenge_method:d},redirectTo:c==null?void 0:c.emailRedirectTo});return{data:{user:null,session:null},error:h}}if("phone"in e){const{phone:l,options:c}=e,{data:u,error:d}=await x(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(n=c==null?void 0:c.data)!==null&&n!==void 0?n:{},create_user:(i=c==null?void 0:c.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(o=c==null?void 0:c.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:d}}throw new qe("You must provide either an email or phone number.")}catch(l){if(v(l))return{data:{user:null,session:null},error:l};throw l}}async verifyOtp(e){var t,s;try{let n,i;"options"in e&&(n=(t=e.options)===null||t===void 0?void 0:t.redirectTo,i=(s=e.options)===null||s===void 0?void 0:s.captchaToken);const{data:o,error:l}=await x(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:i}}),redirectTo:n,xform:K});if(l)throw l;if(!o)throw new Error("An error occurred on token verification.");const c=o.session,u=o.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(n){if(v(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithSSO(e){var t,s,n;try{let i=null,o=null;return this.flowType==="pkce"&&([i,o]=await me(this.storage,this.storageKey)),await x(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(s=(t=e.options)===null||t===void 0?void 0:t.redirectTo)!==null&&s!==void 0?s:void 0}),!((n=e==null?void 0:e.options)===null||n===void 0)&&n.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:o}),headers:this.headers,xform:Bi})}catch(i){if(v(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:t},error:s}=e;if(s)throw s;if(!t)throw new Y;const{error:n}=await x(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:t.access_token});return{data:{user:null,session:null},error:n}})}catch(e){if(v(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const t=`${this.url}/resend`;if("email"in e){const{email:s,type:n,options:i}=e,{error:o}=await x(this.fetch,"POST",t,{headers:this.headers,body:{email:s,type:n,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in e){const{phone:s,type:n,options:i}=e,{data:o,error:l}=await x(this.fetch,"POST",t,{headers:this.headers,body:{phone:s,type:n,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:l}}throw new qe("You must provide either an email or phone number and a type")}catch(t){if(v(t))return{data:{user:null,session:null},error:t};throw t}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async t=>t))}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const s=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),n=(async()=>(await s,await t()))();return this.pendingInLock.push((async()=>{try{await n}catch{}})()),n}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const s=t();for(this.pendingInLock.push((async()=>{try{await s}catch{}})()),await s;this.pendingInLock.length;){const n=[...this.pendingInLock];await Promise.all(n),this.pendingInLock.splice(0,n.length)}return await s}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const t=await Be(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),t!==null&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const s=e.expires_at?e.expires_at<=Date.now()/1e3:!1;if(this._debug("#__loadSession()",`session has${s?"":" not"} expired`,"expires_at",e.expires_at),!s){if(this.storage.isServer){let o=this.suppressGetSessionWarning;e=new Proxy(e,{get:(c,u,d)=>(!o&&u==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),o=!0,this.suppressGetSessionWarning=!0),Reflect.get(c,u,d))})}return{data:{session:e},error:null}}const{session:n,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{session:null},error:i}:{data:{session:n},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await x(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Z}):await this._useSession(async t=>{var s,n,i;const{data:o,error:l}=t;if(l)throw l;return!(!((s=o.session)===null||s===void 0)&&s.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Y}:await x(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(n=o.session)===null||n===void 0?void 0:n.access_token)!==null&&i!==void 0?i:void 0,xform:Z})})}catch(t){if(v(t))return Ri(t)&&(await this._removeSession(),await Fe(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:t};throw t}}async updateUser(e,t={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,t))}async _updateUser(e,t={}){try{return await this._useSession(async s=>{const{data:n,error:i}=s;if(i)throw i;if(!n.session)throw new Y;const o=n.session;let l=null,c=null;this.flowType==="pkce"&&e.email!=null&&([l,c]=await me(this.storage,this.storageKey));const{data:u,error:d}=await x(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:t==null?void 0:t.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:l,code_challenge_method:c}),jwt:o.access_token,xform:Z});if(d)throw d;return o.user=u.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(s){if(v(s))return{data:{user:null},error:s};throw s}}_decodeJWT(e){return Ht(e)}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Y;const t=Date.now()/1e3;let s=t,n=!0,i=null;const o=Ht(e.access_token);if(o.exp&&(s=o.exp,n=s<=t),n){const{session:l,error:c}=await this._callRefreshToken(e.refresh_token);if(c)return{data:{user:null,session:null},error:c};if(!l)return{data:{user:null,session:null},error:null};i=l}else{const{data:l,error:c}=await this._getUser(e.access_token);if(c)throw c;i={access_token:e.access_token,refresh_token:e.refresh_token,user:l.user,token_type:"bearer",expires_in:s-t,expires_at:s},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(t){if(v(t))return{data:{session:null,user:null},error:t};throw t}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async t=>{var s;if(!e){const{data:o,error:l}=t;if(l)throw l;e=(s=o.session)!==null&&s!==void 0?s:void 0}if(!(e!=null&&e.refresh_token))throw new Y;const{session:n,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{user:null,session:null},error:i}:n?{data:{user:n.user,session:n},error:null}:{data:{user:null,session:null},error:null}})}catch(t){if(v(t))return{data:{user:null,session:null},error:t};throw t}}async _getSessionFromURL(e,t){try{if(!W())throw new We("No browser detected.");if(e.error||e.error_description||e.error_code)throw new We(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(t){case"implicit":if(this.flowType==="pkce")throw new zt("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new We("Not a valid implicit grant flow url.");break;default:}if(t==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new zt("No code detected.");const{data:A,error:O}=await this._exchangeCodeForSession(e.code);if(O)throw O;const E=new URL(window.location.href);return E.searchParams.delete("code"),window.history.replaceState(window.history.state,"",E.toString()),{data:{session:A.session,redirectType:null},error:null}}const{provider_token:s,provider_refresh_token:n,access_token:i,refresh_token:o,expires_in:l,expires_at:c,token_type:u}=e;if(!i||!l||!o||!u)throw new We("No session defined in URL");const d=Math.round(Date.now()/1e3),h=parseInt(l);let f=d+h;c&&(f=parseInt(c));const m=f-d;m*1e3<=Se&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${m}s, should have been closer to ${h}s`);const p=f-h;d-p>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",p,f,d):d-p<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",p,f,d);const{data:b,error:w}=await this._getUser(i);if(w)throw w;const j={provider_token:s,provider_refresh_token:n,access_token:i,expires_in:h,expires_at:f,refresh_token:o,token_type:u,user:b.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:j,redirectType:e.type},error:null}}catch(s){if(v(s))return{data:{session:null,redirectType:null},error:s};throw s}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const t=await Be(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&t)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async t=>{var s;const{data:n,error:i}=t;if(i)return{error:i};const o=(s=n.session)===null||s===void 0?void 0:s.access_token;if(o){const{error:l}=await this.admin.signOut(o,e);if(l&&!(Ai(l)&&(l.status===404||l.status===401||l.status===403)))return{error:l}}return e!=="others"&&(await this._removeSession(),await Fe(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const t=vi(),s={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,s),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(t)})))(),{data:{subscription:s}}}async _emitInitialSession(e){return await this._useSession(async t=>{var s,n;try{const{data:{session:i},error:o}=t;if(o)throw o;await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",e,"session",i)}catch(i){await((n=this.stateChangeEmitters.get(e))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",i),console.error(i)}})}async resetPasswordForEmail(e,t={}){let s=null,n=null;this.flowType==="pkce"&&([s,n]=await me(this.storage,this.storageKey,!0));try{return await x(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:s,code_challenge_method:n,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(i){if(v(i))return{data:null,error:i};throw i}}async getUserIdentities(){var e;try{const{data:t,error:s}=await this.getUser();if(s)throw s;return{data:{identities:(e=t.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(t){if(v(t))return{data:null,error:t};throw t}}async linkIdentity(e){var t;try{const{data:s,error:n}=await this._useSession(async i=>{var o,l,c,u,d;const{data:h,error:f}=i;if(f)throw f;const m=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(o=e.options)===null||o===void 0?void 0:o.redirectTo,scopes:(l=e.options)===null||l===void 0?void 0:l.scopes,queryParams:(c=e.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await x(this.fetch,"GET",m,{headers:this.headers,jwt:(d=(u=h.session)===null||u===void 0?void 0:u.access_token)!==null&&d!==void 0?d:void 0})});if(n)throw n;return W()&&!(!((t=e.options)===null||t===void 0)&&t.skipBrowserRedirect)&&window.location.assign(s==null?void 0:s.url),{data:{provider:e.provider,url:s==null?void 0:s.url},error:null}}catch(s){if(v(s))return{data:{provider:e.provider,url:null},error:s};throw s}}async unlinkIdentity(e){try{return await this._useSession(async t=>{var s,n;const{data:i,error:o}=t;if(o)throw o;return await x(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(n=(s=i.session)===null||s===void 0?void 0:s.access_token)!==null&&n!==void 0?n:void 0})})}catch(t){if(v(t))return{data:null,error:t};throw t}}async _refreshAccessToken(e){const t=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(t,"begin");try{const s=Date.now();return await ki(async n=>(n>0&&await ji(200*Math.pow(2,n-1)),this._debug(t,"refreshing attempt",n),await x(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:K})),(n,i)=>{const o=200*Math.pow(2,n);return i&&ct(i)&&Date.now()+o-s<Se})}catch(s){if(this._debug(t,"error",s),v(s))return{data:{session:null,user:null},error:s};throw s}finally{this._debug(t,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){const s=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",s),W()&&!t.skipBrowserRedirect&&window.location.assign(s),{data:{provider:e,url:s},error:null}}async _recoverAndRefresh(){var e;const t="#_recoverAndRefresh()";this._debug(t,"begin");try{const s=await Be(this.storage,this.storageKey);if(this._debug(t,"session from storage",s),!this._isValidSession(s)){this._debug(t,"session is not valid"),s!==null&&await this._removeSession();return}const n=Math.round(Date.now()/1e3),i=((e=s.expires_at)!==null&&e!==void 0?e:1/0)<n+Wt;if(this._debug(t,`session has${i?"":" not"} expired with margin of ${Wt}s`),i){if(this.autoRefreshToken&&s.refresh_token){const{error:o}=await this._callRefreshToken(s.refresh_token);o&&(console.error(o),ct(o)||(this._debug(t,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(t,"error",s),console.error(s);return}finally{this._debug(t,"end")}}async _callRefreshToken(e){var t,s;if(!e)throw new Y;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const n=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{this.refreshingDeferred=new st;const{data:i,error:o}=await this._refreshAccessToken(e);if(o)throw o;if(!i.session)throw new Y;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const l={session:i.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(i){if(this._debug(n,"error",i),v(i)){const o={session:null,error:i};return ct(i)||await this._removeSession(),(t=this.refreshingDeferred)===null||t===void 0||t.resolve(o),o}throw(s=this.refreshingDeferred)===null||s===void 0||s.reject(i),i}finally{this.refreshingDeferred=null,this._debug(n,"end")}}async _notifyAllSubscribers(e,t,s=!0){const n=`#_notifyAllSubscribers(${e})`;this._debug(n,"begin",t,`broadcast = ${s}`);try{this.broadcastChannel&&s&&this.broadcastChannel.postMessage({event:e,session:t});const i=[],o=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(e,t)}catch(c){i.push(c)}});if(await Promise.all(o),i.length>0){for(let l=0;l<i.length;l+=1)console.error(i[l]);throw i[0]}}finally{this._debug(n,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await Rs(this.storage,this.storageKey,e)}async _removeSession(){this._debug("#_removeSession()"),await Fe(this.storage,this.storageKey),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&W()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(t){console.error("removing visibilitychange callback failed",t)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Se);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async t=>{const{data:{session:s}}=t;if(!s||!s.refresh_token||!s.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const n=Math.floor((s.expires_at*1e3-e)/Se);this._debug("#_autoRefreshTokenTick()",`access token expires in ${n} ticks, a tick lasts ${Se}ms, refresh threshold is ${Kt} ticks`),n<=Kt&&await this._callRefreshToken(s.refresh_token)})}catch(t){console.error("Auto refresh tick failed with error. This is likely a transient error.",t)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof Ls)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!W()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const t=`#_onVisibilityChanged(${e})`;this._debug(t,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t,s){const n=[`provider=${encodeURIComponent(t)}`];if(s!=null&&s.redirectTo&&n.push(`redirect_to=${encodeURIComponent(s.redirectTo)}`),s!=null&&s.scopes&&n.push(`scopes=${encodeURIComponent(s.scopes)}`),this.flowType==="pkce"){const[i,o]=await me(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(o)}`});n.push(l.toString())}if(s!=null&&s.queryParams){const i=new URLSearchParams(s.queryParams);n.push(i.toString())}return s!=null&&s.skipBrowserRedirect&&n.push(`skip_http_redirect=${s.skipBrowserRedirect}`),`${e}?${n.join("&")}`}async _unenroll(e){try{return await this._useSession(async t=>{var s;const{data:n,error:i}=t;return i?{data:null,error:i}:await x(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(s=n==null?void 0:n.session)===null||s===void 0?void 0:s.access_token})})}catch(t){if(v(t))return{data:null,error:t};throw t}}async _enroll(e){try{return await this._useSession(async t=>{var s,n;const{data:i,error:o}=t;if(o)return{data:null,error:o};const l=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:c,error:u}=await x(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(s=i==null?void 0:i.session)===null||s===void 0?void 0:s.access_token});return u?{data:null,error:u}:(e.factorType==="totp"&&(!((n=c==null?void 0:c.totp)===null||n===void 0)&&n.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),{data:c,error:null})})}catch(t){if(v(t))return{data:null,error:t};throw t}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var s;const{data:n,error:i}=t;if(i)return{data:null,error:i};const{data:o,error:l}=await x(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(s=n==null?void 0:n.session)===null||s===void 0?void 0:s.access_token});return l?{data:null,error:l}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),{data:o,error:l})})}catch(t){if(v(t))return{data:null,error:t};throw t}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var s;const{data:n,error:i}=t;return i?{data:null,error:i}:await x(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(s=n==null?void 0:n.session)===null||s===void 0?void 0:s.access_token})})}catch(t){if(v(t))return{data:null,error:t};throw t}})}async _challengeAndVerify(e){const{data:t,error:s}=await this._challenge({factorId:e.factorId});return s?{data:null,error:s}:await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){const{data:{user:e},error:t}=await this.getUser();if(t)return{data:null,error:t};const s=(e==null?void 0:e.factors)||[],n=s.filter(o=>o.factor_type==="totp"&&o.status==="verified"),i=s.filter(o=>o.factor_type==="phone"&&o.status==="verified");return{data:{all:s,totp:n,phone:i},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var t,s;const{data:{session:n},error:i}=e;if(i)return{data:null,error:i};if(!n)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const o=this._decodeJWT(n.access_token);let l=null;o.aal&&(l=o.aal);let c=l;((s=(t=n.user.factors)===null||t===void 0?void 0:t.filter(h=>h.status==="verified"))!==null&&s!==void 0?s:[]).length>0&&(c="aal2");const d=o.amr||[];return{data:{currentLevel:l,nextLevel:c,currentAuthenticationMethods:d},error:null}}))}}$e.nextInstanceID=0;const Qi=$e;class Xi extends Qi{constructor(e){super(e)}}var Zi=function(r,e,t,s){function n(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function l(d){try{u(s.next(d))}catch(h){o(h)}}function c(d){try{u(s.throw(d))}catch(h){o(h)}}function u(d){d.done?i(d.value):n(d.value).then(l,c)}u((s=s.apply(r,e||[])).next())})};class ea{constructor(e,t,s){var n,i,o;if(this.supabaseUrl=e,this.supabaseKey=t,!e)throw new Error("supabaseUrl is required.");if(!t)throw new Error("supabaseKey is required.");const l=fi(e);this.realtimeUrl=`${l}/realtime/v1`.replace(/^http/i,"ws"),this.authUrl=`${l}/auth/v1`,this.storageUrl=`${l}/storage/v1`,this.functionsUrl=`${l}/functions/v1`;const c=`sb-${new URL(this.authUrl).hostname.split(".")[0]}-auth-token`,u={db:ii,realtime:oi,auth:Object.assign(Object.assign({},ai),{storageKey:c}),global:ni},d=mi(s??{},u);this.storageKey=(n=d.auth.storageKey)!==null&&n!==void 0?n:"",this.headers=(i=d.global.headers)!==null&&i!==void 0?i:{},d.accessToken?(this.accessToken=d.accessToken,this.auth=new Proxy({},{get:(h,f)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(f)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=d.auth)!==null&&o!==void 0?o:{},this.headers,d.global.fetch),this.fetch=ui(t,this._getAccessToken.bind(this),d.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},d.realtime)),this.rest=new Nn(`${l}/rest/v1`,{headers:this.headers,schema:d.db.schema,fetch:this.fetch}),d.accessToken||this._listenForAuthEvents()}get functions(){return new tn(this.functionsUrl,{headers:this.headers,customFetch:this.fetch})}get storage(){return new ti(this.storageUrl,this.headers,this.fetch)}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},s={}){return this.rest.rpc(e,t,s)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,t;return Zi(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:s}=yield this.auth.getSession();return(t=(e=s.session)===null||e===void 0?void 0:e.access_token)!==null&&t!==void 0?t:null})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:s,storage:n,storageKey:i,flowType:o,lock:l,debug:c},u,d){const h={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Xi({url:this.authUrl,headers:Object.assign(Object.assign({},h),u),storageKey:i,autoRefreshToken:e,persistSession:t,detectSessionInUrl:s,storage:n,flowType:o,lock:l,debug:c,fetch:d,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new Fn(this.realtimeUrl,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,s)=>{this._handleTokenChanged(t,"CLIENT",s==null?void 0:s.access_token)})}_handleTokenChanged(e,t,s){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==s?this.changedAccessToken=s:e==="SIGNED_OUT"&&(this.realtime.setAuth(),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const ta=(r,e,t)=>new ea(r,e,t),sa="your_supabase_url",ra="your_supabase_anon_key",T=ta(sa,ra),Is=g.createContext(void 0);function na({children:r}){const[e,t]=g.useState(null),[s,n]=g.useState(!0);g.useEffect(()=>{T.auth.getSession().then(({data:{session:u}})=>{t((u==null?void 0:u.user)??null),n(!1)});const{data:{subscription:c}}=T.auth.onAuthStateChange((u,d)=>{t((d==null?void 0:d.user)??null)});return()=>c.unsubscribe()},[]);const i=async(c,u)=>{const{error:d}=await T.auth.signUp({email:c,password:u});if(d)throw d},o=async(c,u)=>{const{error:d}=await T.auth.signInWithPassword({email:c,password:u});if(d)throw d},l=async()=>{const{error:c}=await T.auth.signOut();if(c)throw c};return a.jsx(Is.Provider,{value:{user:e,loading:s,signIn:o,signUp:i,signOut:l},children:!s&&r})}function te(){const r=g.useContext(Is);if(r===void 0)throw new Error("useAuth must be used within an AuthProvider");return r}/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var ia={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aa=r=>r.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),$=(r,e)=>{const t=g.forwardRef(({color:s="currentColor",size:n=24,strokeWidth:i=2,absoluteStrokeWidth:o,className:l="",children:c,...u},d)=>g.createElement("svg",{ref:d,...ia,width:n,height:n,stroke:s,strokeWidth:o?Number(i)*24/Number(n):i,className:["lucide",`lucide-${aa(r)}`,l].join(" "),...u},[...e.map(([h,f])=>g.createElement(h,f)),...Array.isArray(c)?c:[c]]));return t.displayName=`${r}`,t};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xt=$("Bike",[["circle",{cx:"18.5",cy:"17.5",r:"3.5",key:"15x4ox"}],["circle",{cx:"5.5",cy:"17.5",r:"3.5",key:"1noe27"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["path",{d:"M12 17.5V14l-3-3 4-3 2 3h2",key:"1npguv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pt=$("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const le=$("Car",[["path",{d:"M19 17h2c.6 0 1-.4 1-1v-3c0-.9-.7-1.7-1.5-1.9C18.7 10.6 16 10 16 10s-1.3-1.4-2.2-2.3c-.5-.4-1.1-.7-1.8-.7H5c-.6 0-1.1.4-1.4.9l-1.4 2.9A3.7 3.7 0 0 0 2 12v4c0 .6.4 1 1 1h2",key:"5owen"}],["circle",{cx:"7",cy:"17",r:"2",key:"u2ysq9"}],["path",{d:"M9 17h6",key:"r8uit2"}],["circle",{cx:"17",cy:"17",r:"2",key:"axvx0g"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zt=$("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Et=$("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ie=$("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oa=$("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const la=$("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ms=$("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Us=$("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wt=$("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bs=$("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ca=$("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const da=$("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fs=$("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const es=$("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ua=$("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]);function ha(){const[r,e]=g.useState(""),[t,s]=g.useState(""),[n,i]=g.useState(!1),o=xt(),{signIn:l}=te(),c=async u=>{u.preventDefault(),i(!0);try{await l(r,t),N.success("Welcome back!"),o("/dashboard")}catch{N.error("Invalid credentials")}finally{i(!1)}};return a.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8",children:a.jsxs("div",{className:"max-w-md w-full space-y-8 bg-white p-8 rounded-xl shadow-lg",children:[a.jsxs("div",{children:[a.jsx(oa,{className:"mx-auto h-12 w-12 text-blue-600"}),a.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"Sign in to SpotMaster"})]}),a.jsxs("form",{className:"mt-8 space-y-6",onSubmit:c,children:[a.jsxs("div",{className:"rounded-md shadow-sm -space-y-px",children:[a.jsxs("div",{children:[a.jsx("label",{htmlFor:"email",className:"sr-only",children:"Email address"}),a.jsx("input",{id:"email",name:"email",type:"email",required:!0,className:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-t-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 focus:z-10 sm:text-sm",placeholder:"Email address",value:r,onChange:u=>e(u.target.value)})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"password",className:"sr-only",children:"Password"}),a.jsx("input",{id:"password",name:"password",type:"password",required:!0,className:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-b-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 focus:z-10 sm:text-sm",placeholder:"Password",value:t,onChange:u=>s(u.target.value)})]})]}),a.jsx("div",{children:a.jsx("button",{type:"submit",disabled:n,className:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50",children:n?"Signing in...":"Sign in"})})]})]})})}function q(r){const e=Object.prototype.toString.call(r);return r instanceof Date||typeof r=="object"&&e==="[object Date]"?new r.constructor(+r):typeof r=="number"||e==="[object Number]"||typeof r=="string"||e==="[object String]"?new Date(r):new Date(NaN)}function ce(r,e){return r instanceof Date?new r.constructor(e):new Date(e)}const qs=6048e5,fa=864e5;let ma={};function rt(){return ma}function Ae(r,e){var l,c,u,d;const t=rt(),s=(e==null?void 0:e.weekStartsOn)??((c=(l=e==null?void 0:e.locale)==null?void 0:l.options)==null?void 0:c.weekStartsOn)??t.weekStartsOn??((d=(u=t.locale)==null?void 0:u.options)==null?void 0:d.weekStartsOn)??0,n=q(r),i=n.getDay(),o=(i<s?7:0)+i-s;return n.setDate(n.getDate()-o),n.setHours(0,0,0,0),n}function Ve(r){return Ae(r,{weekStartsOn:1})}function Ws(r){const e=q(r),t=e.getFullYear(),s=ce(r,0);s.setFullYear(t+1,0,4),s.setHours(0,0,0,0);const n=Ve(s),i=ce(r,0);i.setFullYear(t,0,4),i.setHours(0,0,0,0);const o=Ve(i);return e.getTime()>=n.getTime()?t+1:e.getTime()>=o.getTime()?t:t-1}function ts(r){const e=q(r);return e.setHours(0,0,0,0),e}function ss(r){const e=q(r),t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),+r-+t}function ga(r,e){const t=ts(r),s=ts(e),n=+t-ss(t),i=+s-ss(s);return Math.round((n-i)/fa)}function pa(r){const e=Ws(r),t=ce(r,0);return t.setFullYear(e,0,4),t.setHours(0,0,0,0),Ve(t)}function ya(r){return r instanceof Date||typeof r=="object"&&Object.prototype.toString.call(r)==="[object Date]"}function ba(r){if(!ya(r)&&typeof r!="number")return!1;const e=q(r);return!isNaN(Number(e))}function va(r){const e=q(r),t=ce(r,0);return t.setFullYear(e.getFullYear(),0,1),t.setHours(0,0,0,0),t}const wa={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},xa=(r,e,t)=>{let s;const n=wa[r];return typeof n=="string"?s=n:e===1?s=n.one:s=n.other.replace("{{count}}",e.toString()),t!=null&&t.addSuffix?t.comparison&&t.comparison>0?"in "+s:s+" ago":s};function dt(r){return(e={})=>{const t=e.width?String(e.width):r.defaultWidth;return r.formats[t]||r.formats[r.defaultWidth]}}const _a={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},ja={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},ka={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},Sa={date:dt({formats:_a,defaultWidth:"full"}),time:dt({formats:ja,defaultWidth:"full"}),dateTime:dt({formats:ka,defaultWidth:"full"})},Na={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},Pa=(r,e,t,s)=>Na[r];function Ne(r){return(e,t)=>{const s=t!=null&&t.context?String(t.context):"standalone";let n;if(s==="formatting"&&r.formattingValues){const o=r.defaultFormattingWidth||r.defaultWidth,l=t!=null&&t.width?String(t.width):o;n=r.formattingValues[l]||r.formattingValues[o]}else{const o=r.defaultWidth,l=t!=null&&t.width?String(t.width):r.defaultWidth;n=r.values[l]||r.values[o]}const i=r.argumentCallback?r.argumentCallback(e):e;return n[i]}}const Ea={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},Ta={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},Oa={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},Ca={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},$a={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},Aa={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},Ra=(r,e)=>{const t=Number(r),s=t%100;if(s>20||s<10)switch(s%10){case 1:return t+"st";case 2:return t+"nd";case 3:return t+"rd"}return t+"th"},Da={ordinalNumber:Ra,era:Ne({values:Ea,defaultWidth:"wide"}),quarter:Ne({values:Ta,defaultWidth:"wide",argumentCallback:r=>r-1}),month:Ne({values:Oa,defaultWidth:"wide"}),day:Ne({values:Ca,defaultWidth:"wide"}),dayPeriod:Ne({values:$a,defaultWidth:"wide",formattingValues:Aa,defaultFormattingWidth:"wide"})};function Pe(r){return(e,t={})=>{const s=t.width,n=s&&r.matchPatterns[s]||r.matchPatterns[r.defaultMatchWidth],i=e.match(n);if(!i)return null;const o=i[0],l=s&&r.parsePatterns[s]||r.parsePatterns[r.defaultParseWidth],c=Array.isArray(l)?Ia(l,h=>h.test(o)):La(l,h=>h.test(o));let u;u=r.valueCallback?r.valueCallback(c):c,u=t.valueCallback?t.valueCallback(u):u;const d=e.slice(o.length);return{value:u,rest:d}}}function La(r,e){for(const t in r)if(Object.prototype.hasOwnProperty.call(r,t)&&e(r[t]))return t}function Ia(r,e){for(let t=0;t<r.length;t++)if(e(r[t]))return t}function Ma(r){return(e,t={})=>{const s=e.match(r.matchPattern);if(!s)return null;const n=s[0],i=e.match(r.parsePattern);if(!i)return null;let o=r.valueCallback?r.valueCallback(i[0]):i[0];o=t.valueCallback?t.valueCallback(o):o;const l=e.slice(n.length);return{value:o,rest:l}}}const Ua=/^(\d+)(th|st|nd|rd)?/i,Ba=/\d+/i,Fa={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},qa={any:[/^b/i,/^(a|c)/i]},Wa={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},Ha={any:[/1/i,/2/i,/3/i,/4/i]},za={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},Ga={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},Ja={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},Va={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},Ya={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},Ka={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},Qa={ordinalNumber:Ma({matchPattern:Ua,parsePattern:Ba,valueCallback:r=>parseInt(r,10)}),era:Pe({matchPatterns:Fa,defaultMatchWidth:"wide",parsePatterns:qa,defaultParseWidth:"any"}),quarter:Pe({matchPatterns:Wa,defaultMatchWidth:"wide",parsePatterns:Ha,defaultParseWidth:"any",valueCallback:r=>r+1}),month:Pe({matchPatterns:za,defaultMatchWidth:"wide",parsePatterns:Ga,defaultParseWidth:"any"}),day:Pe({matchPatterns:Ja,defaultMatchWidth:"wide",parsePatterns:Va,defaultParseWidth:"any"}),dayPeriod:Pe({matchPatterns:Ya,defaultMatchWidth:"any",parsePatterns:Ka,defaultParseWidth:"any"})},Xa={code:"en-US",formatDistance:xa,formatLong:Sa,formatRelative:Pa,localize:Da,match:Qa,options:{weekStartsOn:0,firstWeekContainsDate:1}};function Za(r){const e=q(r);return ga(e,va(e))+1}function eo(r){const e=q(r),t=+Ve(e)-+pa(e);return Math.round(t/qs)+1}function Hs(r,e){var d,h,f,m;const t=q(r),s=t.getFullYear(),n=rt(),i=(e==null?void 0:e.firstWeekContainsDate)??((h=(d=e==null?void 0:e.locale)==null?void 0:d.options)==null?void 0:h.firstWeekContainsDate)??n.firstWeekContainsDate??((m=(f=n.locale)==null?void 0:f.options)==null?void 0:m.firstWeekContainsDate)??1,o=ce(r,0);o.setFullYear(s+1,0,i),o.setHours(0,0,0,0);const l=Ae(o,e),c=ce(r,0);c.setFullYear(s,0,i),c.setHours(0,0,0,0);const u=Ae(c,e);return t.getTime()>=l.getTime()?s+1:t.getTime()>=u.getTime()?s:s-1}function to(r,e){var l,c,u,d;const t=rt(),s=(e==null?void 0:e.firstWeekContainsDate)??((c=(l=e==null?void 0:e.locale)==null?void 0:l.options)==null?void 0:c.firstWeekContainsDate)??t.firstWeekContainsDate??((d=(u=t.locale)==null?void 0:u.options)==null?void 0:d.firstWeekContainsDate)??1,n=Hs(r,e),i=ce(r,0);return i.setFullYear(n,0,s),i.setHours(0,0,0,0),Ae(i,e)}function so(r,e){const t=q(r),s=+Ae(t,e)-+to(t,e);return Math.round(s/qs)+1}function _(r,e){const t=r<0?"-":"",s=Math.abs(r).toString().padStart(e,"0");return t+s}const V={y(r,e){const t=r.getFullYear(),s=t>0?t:1-t;return _(e==="yy"?s%100:s,e.length)},M(r,e){const t=r.getMonth();return e==="M"?String(t+1):_(t+1,2)},d(r,e){return _(r.getDate(),e.length)},a(r,e){const t=r.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return t.toUpperCase();case"aaa":return t;case"aaaaa":return t[0];case"aaaa":default:return t==="am"?"a.m.":"p.m."}},h(r,e){return _(r.getHours()%12||12,e.length)},H(r,e){return _(r.getHours(),e.length)},m(r,e){return _(r.getMinutes(),e.length)},s(r,e){return _(r.getSeconds(),e.length)},S(r,e){const t=e.length,s=r.getMilliseconds(),n=Math.trunc(s*Math.pow(10,t-3));return _(n,e.length)}},pe={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},rs={G:function(r,e,t){const s=r.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return t.era(s,{width:"abbreviated"});case"GGGGG":return t.era(s,{width:"narrow"});case"GGGG":default:return t.era(s,{width:"wide"})}},y:function(r,e,t){if(e==="yo"){const s=r.getFullYear(),n=s>0?s:1-s;return t.ordinalNumber(n,{unit:"year"})}return V.y(r,e)},Y:function(r,e,t,s){const n=Hs(r,s),i=n>0?n:1-n;if(e==="YY"){const o=i%100;return _(o,2)}return e==="Yo"?t.ordinalNumber(i,{unit:"year"}):_(i,e.length)},R:function(r,e){const t=Ws(r);return _(t,e.length)},u:function(r,e){const t=r.getFullYear();return _(t,e.length)},Q:function(r,e,t){const s=Math.ceil((r.getMonth()+1)/3);switch(e){case"Q":return String(s);case"QQ":return _(s,2);case"Qo":return t.ordinalNumber(s,{unit:"quarter"});case"QQQ":return t.quarter(s,{width:"abbreviated",context:"formatting"});case"QQQQQ":return t.quarter(s,{width:"narrow",context:"formatting"});case"QQQQ":default:return t.quarter(s,{width:"wide",context:"formatting"})}},q:function(r,e,t){const s=Math.ceil((r.getMonth()+1)/3);switch(e){case"q":return String(s);case"qq":return _(s,2);case"qo":return t.ordinalNumber(s,{unit:"quarter"});case"qqq":return t.quarter(s,{width:"abbreviated",context:"standalone"});case"qqqqq":return t.quarter(s,{width:"narrow",context:"standalone"});case"qqqq":default:return t.quarter(s,{width:"wide",context:"standalone"})}},M:function(r,e,t){const s=r.getMonth();switch(e){case"M":case"MM":return V.M(r,e);case"Mo":return t.ordinalNumber(s+1,{unit:"month"});case"MMM":return t.month(s,{width:"abbreviated",context:"formatting"});case"MMMMM":return t.month(s,{width:"narrow",context:"formatting"});case"MMMM":default:return t.month(s,{width:"wide",context:"formatting"})}},L:function(r,e,t){const s=r.getMonth();switch(e){case"L":return String(s+1);case"LL":return _(s+1,2);case"Lo":return t.ordinalNumber(s+1,{unit:"month"});case"LLL":return t.month(s,{width:"abbreviated",context:"standalone"});case"LLLLL":return t.month(s,{width:"narrow",context:"standalone"});case"LLLL":default:return t.month(s,{width:"wide",context:"standalone"})}},w:function(r,e,t,s){const n=so(r,s);return e==="wo"?t.ordinalNumber(n,{unit:"week"}):_(n,e.length)},I:function(r,e,t){const s=eo(r);return e==="Io"?t.ordinalNumber(s,{unit:"week"}):_(s,e.length)},d:function(r,e,t){return e==="do"?t.ordinalNumber(r.getDate(),{unit:"date"}):V.d(r,e)},D:function(r,e,t){const s=Za(r);return e==="Do"?t.ordinalNumber(s,{unit:"dayOfYear"}):_(s,e.length)},E:function(r,e,t){const s=r.getDay();switch(e){case"E":case"EE":case"EEE":return t.day(s,{width:"abbreviated",context:"formatting"});case"EEEEE":return t.day(s,{width:"narrow",context:"formatting"});case"EEEEEE":return t.day(s,{width:"short",context:"formatting"});case"EEEE":default:return t.day(s,{width:"wide",context:"formatting"})}},e:function(r,e,t,s){const n=r.getDay(),i=(n-s.weekStartsOn+8)%7||7;switch(e){case"e":return String(i);case"ee":return _(i,2);case"eo":return t.ordinalNumber(i,{unit:"day"});case"eee":return t.day(n,{width:"abbreviated",context:"formatting"});case"eeeee":return t.day(n,{width:"narrow",context:"formatting"});case"eeeeee":return t.day(n,{width:"short",context:"formatting"});case"eeee":default:return t.day(n,{width:"wide",context:"formatting"})}},c:function(r,e,t,s){const n=r.getDay(),i=(n-s.weekStartsOn+8)%7||7;switch(e){case"c":return String(i);case"cc":return _(i,e.length);case"co":return t.ordinalNumber(i,{unit:"day"});case"ccc":return t.day(n,{width:"abbreviated",context:"standalone"});case"ccccc":return t.day(n,{width:"narrow",context:"standalone"});case"cccccc":return t.day(n,{width:"short",context:"standalone"});case"cccc":default:return t.day(n,{width:"wide",context:"standalone"})}},i:function(r,e,t){const s=r.getDay(),n=s===0?7:s;switch(e){case"i":return String(n);case"ii":return _(n,e.length);case"io":return t.ordinalNumber(n,{unit:"day"});case"iii":return t.day(s,{width:"abbreviated",context:"formatting"});case"iiiii":return t.day(s,{width:"narrow",context:"formatting"});case"iiiiii":return t.day(s,{width:"short",context:"formatting"});case"iiii":default:return t.day(s,{width:"wide",context:"formatting"})}},a:function(r,e,t){const n=r.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return t.dayPeriod(n,{width:"abbreviated",context:"formatting"});case"aaa":return t.dayPeriod(n,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return t.dayPeriod(n,{width:"narrow",context:"formatting"});case"aaaa":default:return t.dayPeriod(n,{width:"wide",context:"formatting"})}},b:function(r,e,t){const s=r.getHours();let n;switch(s===12?n=pe.noon:s===0?n=pe.midnight:n=s/12>=1?"pm":"am",e){case"b":case"bb":return t.dayPeriod(n,{width:"abbreviated",context:"formatting"});case"bbb":return t.dayPeriod(n,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return t.dayPeriod(n,{width:"narrow",context:"formatting"});case"bbbb":default:return t.dayPeriod(n,{width:"wide",context:"formatting"})}},B:function(r,e,t){const s=r.getHours();let n;switch(s>=17?n=pe.evening:s>=12?n=pe.afternoon:s>=4?n=pe.morning:n=pe.night,e){case"B":case"BB":case"BBB":return t.dayPeriod(n,{width:"abbreviated",context:"formatting"});case"BBBBB":return t.dayPeriod(n,{width:"narrow",context:"formatting"});case"BBBB":default:return t.dayPeriod(n,{width:"wide",context:"formatting"})}},h:function(r,e,t){if(e==="ho"){let s=r.getHours()%12;return s===0&&(s=12),t.ordinalNumber(s,{unit:"hour"})}return V.h(r,e)},H:function(r,e,t){return e==="Ho"?t.ordinalNumber(r.getHours(),{unit:"hour"}):V.H(r,e)},K:function(r,e,t){const s=r.getHours()%12;return e==="Ko"?t.ordinalNumber(s,{unit:"hour"}):_(s,e.length)},k:function(r,e,t){let s=r.getHours();return s===0&&(s=24),e==="ko"?t.ordinalNumber(s,{unit:"hour"}):_(s,e.length)},m:function(r,e,t){return e==="mo"?t.ordinalNumber(r.getMinutes(),{unit:"minute"}):V.m(r,e)},s:function(r,e,t){return e==="so"?t.ordinalNumber(r.getSeconds(),{unit:"second"}):V.s(r,e)},S:function(r,e){return V.S(r,e)},X:function(r,e,t){const s=r.getTimezoneOffset();if(s===0)return"Z";switch(e){case"X":return is(s);case"XXXX":case"XX":return ae(s);case"XXXXX":case"XXX":default:return ae(s,":")}},x:function(r,e,t){const s=r.getTimezoneOffset();switch(e){case"x":return is(s);case"xxxx":case"xx":return ae(s);case"xxxxx":case"xxx":default:return ae(s,":")}},O:function(r,e,t){const s=r.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+ns(s,":");case"OOOO":default:return"GMT"+ae(s,":")}},z:function(r,e,t){const s=r.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+ns(s,":");case"zzzz":default:return"GMT"+ae(s,":")}},t:function(r,e,t){const s=Math.trunc(r.getTime()/1e3);return _(s,e.length)},T:function(r,e,t){const s=r.getTime();return _(s,e.length)}};function ns(r,e=""){const t=r>0?"-":"+",s=Math.abs(r),n=Math.trunc(s/60),i=s%60;return i===0?t+String(n):t+String(n)+e+_(i,2)}function is(r,e){return r%60===0?(r>0?"-":"+")+_(Math.abs(r)/60,2):ae(r,e)}function ae(r,e=""){const t=r>0?"-":"+",s=Math.abs(r),n=_(Math.trunc(s/60),2),i=_(s%60,2);return t+n+e+i}const as=(r,e)=>{switch(r){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},zs=(r,e)=>{switch(r){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},ro=(r,e)=>{const t=r.match(/(P+)(p+)?/)||[],s=t[1],n=t[2];if(!n)return as(r,e);let i;switch(s){case"P":i=e.dateTime({width:"short"});break;case"PP":i=e.dateTime({width:"medium"});break;case"PPP":i=e.dateTime({width:"long"});break;case"PPPP":default:i=e.dateTime({width:"full"});break}return i.replace("{{date}}",as(s,e)).replace("{{time}}",zs(n,e))},no={p:zs,P:ro},io=/^D+$/,ao=/^Y+$/,oo=["D","DD","YY","YYYY"];function lo(r){return io.test(r)}function co(r){return ao.test(r)}function uo(r,e,t){const s=ho(r,e,t);if(console.warn(s),oo.includes(r))throw new RangeError(s)}function ho(r,e,t){const s=r[0]==="Y"?"years":"days of the month";return`Use \`${r.toLowerCase()}\` instead of \`${r}\` (in \`${e}\`) for formatting ${s} to the input \`${t}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const fo=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,mo=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,go=/^'([^]*?)'?$/,po=/''/g,yo=/[a-zA-Z]/;function bo(r,e,t){var d,h,f,m;const s=rt(),n=s.locale??Xa,i=s.firstWeekContainsDate??((h=(d=s.locale)==null?void 0:d.options)==null?void 0:h.firstWeekContainsDate)??1,o=s.weekStartsOn??((m=(f=s.locale)==null?void 0:f.options)==null?void 0:m.weekStartsOn)??0,l=q(r);if(!ba(l))throw new RangeError("Invalid time value");let c=e.match(mo).map(p=>{const b=p[0];if(b==="p"||b==="P"){const w=no[b];return w(p,n.formatLong)}return p}).join("").match(fo).map(p=>{if(p==="''")return{isToken:!1,value:"'"};const b=p[0];if(b==="'")return{isToken:!1,value:vo(p)};if(rs[b])return{isToken:!0,value:p};if(b.match(yo))throw new RangeError("Format string contains an unescaped latin alphabet character `"+b+"`");return{isToken:!1,value:p}});n.localize.preprocessor&&(c=n.localize.preprocessor(l,c));const u={firstWeekContainsDate:i,weekStartsOn:o,locale:n};return c.map(p=>{if(!p.isToken)return p.value;const b=p.value;(co(b)||lo(b))&&uo(b,e,String(r));const w=rs[b[0]];return w(l,b,n.localize,u)}).join("")}function vo(r){const e=r.match(go);return e?e[1].replace(po,"'"):r}function wo(){const{user:r}=te(),[e,t]=g.useState([]),[s,n]=g.useState([]),[i,o]=g.useState(!0),[l,c]=g.useState(null);g.useState("");const[u,d]=g.useState("card"),[h,f]=g.useState(null),[m,p]=g.useState(bo(new Date,"yyyy-MM-dd'T'HH:mm")),[b,w]=g.useState(60),[j,A]=g.useState("four_wheeler");g.useState([{role:"assistant",content:"Hello! I'm your parking assistant. How can I help you today?"}]),g.useState("");const[O,E]=g.useState(1),[k,B]=g.useState({name:"",phone:"",email:"",notes:""}),[Me,Gs]=g.useState(!1);g.useEffect(()=>{Ot(),Ct(),Js()},[r]);const Js=()=>{navigator.geolocation?navigator.geolocation.getCurrentPosition(y=>{c({lat:y.coords.latitude,lng:y.coords.longitude}),N.success("Location detected successfully")},y=>{N.error("Error getting location. Please enable GPS.")}):N.error("Geolocation is not supported by your browser")},nt=y=>{if(!l)return 1/0;const P=6371,se=(y.latitude-l.lat)*Math.PI/180,_e=(y.longitude-l.lng)*Math.PI/180,je=Math.sin(se/2)*Math.sin(se/2)+Math.cos(l.lat*Math.PI/180)*Math.cos(y.latitude*Math.PI/180)*Math.sin(_e/2)*Math.sin(_e/2),it=2*Math.atan2(Math.sqrt(je),Math.sqrt(1-je));return P*it},Tt=y=>j==="two_wheeler"?y.two_wheeler_spaces:y.four_wheeler_spaces,Ot=async()=>{try{const{data:y,error:P}=await T.from("bookings").select(`
          id,
          spot_id,
          start_time,
          end_time,
          status,
          vehicle_type,
          parking_spots (
            address,
            price_per_minute
          )
        `).eq("user_id",r==null?void 0:r.id).order("created_at",{ascending:!1});if(P)throw P;t(y||[])}catch{N.error("Error fetching bookings")}},Ct=async()=>{try{const{data:y,error:P}=await T.from("parking_spots").select("*").eq("is_available",!0);if(P)throw P;n(y||[])}catch{N.error("Error fetching parking spots")}finally{o(!1)}},Vs=async y=>{const P=Tt(y);if(!P){N.error(`No ${j==="two_wheeler"?"2-wheeler":"4-wheeler"} spaces available`);return}try{const se=new Date(m),_e=new Date(se.getTime()+b*6e4),{data:je}=await T.from("bookings").select("*").eq("spot_id",y.id).eq("vehicle_type",j).eq("status","active").or(`start_time.lte.${_e.toISOString()},end_time.gte.${se.toISOString()}`);if(je&&je.length>0){N.error("This spot is already booked for the selected time period");return}const{data:it,error:$t}=await T.from("bookings").insert([{user_id:r==null?void 0:r.id,spot_id:y.id,start_time:se.toISOString(),end_time:_e.toISOString(),status:"active",vehicle_type:j}]).select().single();if($t)throw $t;const Qs=y.price_per_minute*b,{error:At}=await T.from("payments").insert([{booking_id:it.id,amount:Qs,payment_method:u,status:"completed"}]);if(At)throw At;const Xs=j==="two_wheeler"?"two_wheeler_spaces":"four_wheeler_spaces",{error:Rt}=await T.from("parking_spots").update({[Xs]:P-1}).eq("id",y.id);if(Rt)throw Rt;N.success("Spot booked successfully! You can now park your vehicle."),await T.from("support_messages").insert([{user_id:r==null?void 0:r.id,message:`Booking confirmed for ${j==="two_wheeler"?"2-wheeler":"4-wheeler"} at ${y.address}. Your spot is ready!`,is_from_user:!1}]),f(null),Ot(),Ct()}catch{N.error("Error booking spot")}};if(i)return a.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:a.jsx("div",{className:"text-green-600",children:"Loading..."})});const Ys=[...s].sort((y,P)=>nt(y)-nt(P)),Ks=()=>{switch(O){case 1:return a.jsxs(M.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},className:"bg-white rounded-lg shadow-md p-6",children:[a.jsx("h3",{className:"text-xl font-bold mb-4",children:"Step 1: Select Vehicle Type"}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("button",{onClick:()=>{A("two_wheeler"),E(2)},className:`p-6 rounded-lg border-2 ${j==="two_wheeler"?"border-green-500 bg-green-50":"border-gray-200 hover:border-green-300"} transition-all`,children:[a.jsx(Xt,{className:"h-12 w-12 mx-auto mb-2 text-green-600"}),a.jsx("p",{className:"text-center font-medium",children:"Two Wheeler"}),a.jsx("p",{className:"text-sm text-gray-600 text-center mt-2",children:"Perfect for motorcycles and scooters"})]}),a.jsxs("button",{onClick:()=>{A("four_wheeler"),E(2)},className:`p-6 rounded-lg border-2 ${j==="four_wheeler"?"border-green-500 bg-green-50":"border-gray-200 hover:border-green-300"} transition-all`,children:[a.jsx(le,{className:"h-12 w-12 mx-auto mb-2 text-green-600"}),a.jsx("p",{className:"text-center font-medium",children:"Four Wheeler"}),a.jsx("p",{className:"text-sm text-gray-600 text-center mt-2",children:"Suitable for cars and SUVs"})]})]})]});case 2:return a.jsxs(M.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},className:"bg-white rounded-lg shadow-md p-6",children:[a.jsx("h3",{className:"text-xl font-bold mb-4",children:"Step 2: Choose Location"}),a.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:Ys.map(y=>{const P=Tt(y);return a.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 border-l-4 border-green-500",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx(Ms,{className:"h-5 w-5 text-green-600 mr-2"}),a.jsx("span",{className:"text-gray-900 font-medium",children:y.address})]}),a.jsxs("span",{className:"text-green-600 font-semibold",children:["",y.price_per_minute*60,"/hour"]})]}),l&&a.jsxs("p",{className:"text-sm text-gray-600 mb-4",children:["Distance: ",nt(y).toFixed(2)," km"]}),a.jsxs("p",{className:"text-sm text-gray-600 mb-4",children:["Available Spaces: ",P]}),a.jsx("button",{onClick:()=>{f(y),E(3)},className:"w-full bg-green-600 text-white py-2 px-4 rounded-md hover:bg-green-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",disabled:!P,children:P?"Select This Spot":"No Spaces Available"})]},y.id)})})]});case 3:return a.jsxs(M.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},className:"bg-white rounded-lg shadow-md p-6",children:[a.jsx("h3",{className:"text-xl font-bold mb-4",children:"Step 3: Enter Details"}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Full Name"}),a.jsx("input",{type:"text",value:k.name,onChange:y=>B({...k,name:y.target.value}),className:"w-full border-gray-300 rounded-md shadow-sm focus:ring-green-500 focus:border-green-500",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone Number"}),a.jsx("input",{type:"tel",value:k.phone,onChange:y=>B({...k,phone:y.target.value}),className:"w-full border-gray-300 rounded-md shadow-sm focus:ring-green-500 focus:border-green-500",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),a.jsx("input",{type:"email",value:k.email,onChange:y=>B({...k,email:y.target.value}),className:"w-full border-gray-300 rounded-md shadow-sm focus:ring-green-500 focus:border-green-500",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Additional Notes"}),a.jsx("textarea",{value:k.notes,onChange:y=>B({...k,notes:y.target.value}),className:"w-full border-gray-300 rounded-md shadow-sm focus:ring-green-500 focus:border-green-500",rows:3})]}),a.jsxs("div",{className:"flex justify-between mt-6",children:[a.jsx("button",{onClick:()=>E(2),className:"px-4 py-2 border border-gray-300 rounded-md hover:bg-gray-50",children:"Back"}),a.jsx("button",{onClick:()=>E(4),className:"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700",children:"Continue to Payment"})]})]})]});case 4:return a.jsxs(M.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},className:"bg-white rounded-lg shadow-md p-6",children:[a.jsx("h3",{className:"text-xl font-bold mb-4",children:"Step 4: Payment"}),a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[a.jsx("h4",{className:"font-medium mb-2",children:"Booking Summary"}),a.jsxs("div",{className:"space-y-2 text-sm",children:[a.jsxs("p",{children:["Vehicle Type: ",j==="two_wheeler"?"Two Wheeler":"Four Wheeler"]}),a.jsxs("p",{children:["Location: ",h==null?void 0:h.address]}),a.jsxs("p",{children:["Duration: ",b," minutes"]}),a.jsxs("p",{children:["Total Amount: ",h?h.price_per_minute*b:0]})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Payment Method"}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("label",{className:"flex items-center space-x-3",children:[a.jsx("input",{type:"radio",checked:u==="card",onChange:()=>d("card"),className:"h-4 w-4 text-green-600"}),a.jsx("span",{children:"Credit/Debit Card"})]}),a.jsxs("label",{className:"flex items-center space-x-3",children:[a.jsx("input",{type:"radio",checked:u==="upi",onChange:()=>d("upi"),className:"h-4 w-4 text-green-600"}),a.jsx("span",{children:"UPI"})]})]})]}),a.jsxs("div",{className:"flex justify-between mt-6",children:[a.jsx("button",{onClick:()=>E(3),className:"px-4 py-2 border border-gray-300 rounded-md hover:bg-gray-50",children:"Back"}),a.jsx("button",{onClick:()=>{h&&(Vs(h),E(5))},className:"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700",children:"Confirm & Pay"})]})]})]});case 5:return a.jsxs(M.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"bg-white rounded-lg shadow-md p-6 text-center",children:[a.jsx(Zt,{className:"h-16 w-16 text-green-600 mx-auto mb-4"}),a.jsx("h3",{className:"text-2xl font-bold mb-2",children:"Booking Confirmed!"}),a.jsx("p",{className:"text-gray-600 mb-6",children:"Your parking spot has been reserved. A confirmation has been sent to your email."}),a.jsx("button",{onClick:()=>{E(1),f(null),B({name:"",phone:"",email:"",notes:""})},className:"px-6 py-2 bg-green-600 text-white rounded-md hover:bg-green-700",children:"Book Another Spot"})]});default:return null}};return a.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:a.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[a.jsx("div",{className:"mb-8",children:a.jsx("div",{className:"flex items-center justify-between max-w-3xl mx-auto",children:["Select Vehicle","Choose Location","Enter Details","Payment","Confirmation"].map((y,P)=>a.jsxs("div",{className:`flex items-center ${P<O?"text-green-600":"text-gray-400"}`,children:[a.jsx("div",{className:`flex items-center justify-center h-8 w-8 rounded-full ${P<O?"bg-green-100":"bg-gray-100"}`,children:P<O?a.jsx(Zt,{className:"h-5 w-5"}):a.jsx("span",{children:P+1})}),a.jsx("span",{className:"ml-2 text-sm hidden sm:block",children:y}),P<4&&a.jsx("div",{className:`h-0.5 w-12 sm:w-24 mx-2 ${P<O-1?"bg-green-600":"bg-gray-200"}`})]},y))})}),Ks(),O===1&&a.jsxs("section",{className:"mt-12",children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Your Active Bookings"}),a.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:e.filter(y=>y.status==="active").map(y=>a.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 border-l-4 border-blue-500",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("div",{className:"flex items-center",children:[y.vehicle_type==="two_wheeler"?a.jsx(Xt,{className:"h-5 w-5 text-blue-600 mr-2"}):a.jsx(le,{className:"h-5 w-5 text-blue-600 mr-2"}),a.jsx("span",{className:"text-gray-900 font-medium",children:y.parking_spots.address})]}),a.jsx("span",{className:"px-2 py-1 rounded text-sm bg-green-100 text-green-800",children:"Active"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex items-center text-gray-600",children:[a.jsx(Et,{className:"h-4 w-4 mr-2"}),a.jsxs("span",{children:["Started: ",new Date(y.start_time).toLocaleString()]})]}),y.end_time&&a.jsxs("div",{className:"flex items-center text-gray-600",children:[a.jsx(Pt,{className:"h-4 w-4 mr-2"}),a.jsxs("span",{children:["Ends: ",new Date(y.end_time).toLocaleString()]})]}),a.jsxs("div",{className:"flex items-center text-gray-600",children:[a.jsx(Ie,{className:"h-4 w-4 mr-2"}),a.jsxs("span",{children:["Rate: ",y.parking_spots.price_per_minute*60,"/hour"]})]})]})]},y.id))})]}),a.jsx("div",{className:"fixed bottom-4 right-4",children:a.jsx("button",{onClick:()=>Gs(!Me),className:"bg-green-600 text-white p-4 rounded-full shadow-lg hover:bg-green-700 transition-colors",children:a.jsx(Us,{className:"h-6 w-6"})})})]})})}function xo(){const{user:r}=te(),[e,t]=g.useState({totalBookings:0,activeBookings:0,totalRevenue:0,totalUsers:0,dailyBookings:[]}),[s,n]=g.useState(!0),[i,o]=g.useState("overview"),[l,c]=g.useState(""),[u,d]=g.useState("all");g.useEffect(()=>{if((r==null?void 0:r.email)!=="sagar"){N.error("Unauthorized access");return}h()},[r]);const h=async()=>{try{const{data:m}=await T.from("bookings").select("*"),{data:p}=await T.from("bookings").select("*").eq("status","active"),{data:b}=await T.from("payments").select("amount").eq("status","completed"),{count:w}=await T.from("profiles").select("*",{count:"exact"}),j=new Date;j.setDate(j.getDate()-7);const{data:A}=await T.from("bookings").select("created_at").gte("created_at",j.toISOString()),O=A==null?void 0:A.reduce((k,B)=>{const Me=new Date(B.created_at).toLocaleDateString();return k[Me]=(k[Me]||0)+1,k},{}),E=Object.entries(O||{}).map(([k,B])=>({date:k,count:B}));t({totalBookings:(m==null?void 0:m.length)||0,activeBookings:(p==null?void 0:p.length)||0,totalRevenue:(b==null?void 0:b.reduce((k,B)=>k+B.amount,0))||0,totalUsers:w||0,dailyBookings:E})}catch{N.error("Error fetching admin stats")}finally{n(!1)}},f=()=>{switch(i){case"overview":return a.jsxs("div",{className:"space-y-6",children:[a.jsx("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-4",children:[{icon:a.jsx(le,{className:"h-8 w-8 text-green-500"}),label:"Total Bookings",value:e.totalBookings,color:"green"},{icon:a.jsx(le,{className:"h-8 w-8 text-blue-500"}),label:"Active Bookings",value:e.activeBookings,color:"blue"},{icon:a.jsx(Ie,{className:"h-8 w-8 text-yellow-500"}),label:"Total Revenue",value:`${e.totalRevenue.toLocaleString()}`,color:"yellow"},{icon:a.jsx(es,{className:"h-8 w-8 text-purple-500"}),label:"Total Users",value:e.totalUsers,color:"purple"}].map((m,p)=>a.jsx(M.div,{className:`bg-white p-6 rounded-lg shadow-md border-l-4 border-${m.color}-500`,initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:p*.1},children:a.jsxs("div",{className:"flex items-center",children:[m.icon,a.jsxs("div",{className:"ml-3",children:[a.jsx("p",{className:"text-sm text-gray-600",children:m.label}),a.jsx("p",{className:"text-2xl font-bold text-gray-900",children:m.value})]})]})},p))}),a.jsxs(M.div,{className:"bg-white p-6 rounded-lg shadow-md",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.4},children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsx("h2",{className:"text-lg font-semibold",children:"Revenue Overview"}),a.jsxs("select",{className:"border rounded-md p-2",children:[a.jsx("option",{children:"Last 7 Days"}),a.jsx("option",{children:"Last 30 Days"}),a.jsx("option",{children:"Last 3 Months"})]})]}),a.jsx("div",{className:"h-64"})]}),a.jsxs(M.div,{className:"bg-white p-6 rounded-lg shadow-md",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.5},children:[a.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Recent Activity"}),a.jsx("div",{className:"space-y-4"})]})]});case"bookings":return a.jsxs("div",{className:"bg-white rounded-lg shadow-md",children:[a.jsx("div",{className:"p-4 border-b",children:a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[a.jsx("h2",{className:"text-lg font-semibold mb-4 sm:mb-0",children:"Manage Bookings"}),a.jsxs("div",{className:"flex space-x-4",children:[a.jsxs("div",{className:"relative",children:[a.jsx(wt,{className:"absolute left-3 top-2.5 h-5 w-5 text-gray-400"}),a.jsx("input",{type:"text",placeholder:"Search bookings...",className:"pl-10 pr-4 py-2 border rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent",value:l,onChange:m=>c(m.target.value)})]}),a.jsxs("select",{className:"border rounded-md px-4 py-2",value:u,onChange:m=>d(m.target.value),children:[a.jsx("option",{value:"all",children:"All Status"}),a.jsx("option",{value:"active",children:"Active"}),a.jsx("option",{value:"completed",children:"Completed"}),a.jsx("option",{value:"cancelled",children:"Cancelled"})]})]})]})}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Booking ID"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Customer"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Location"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Amount"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200"})]})})]});case"users":return a.jsxs("div",{className:"bg-white rounded-lg shadow-md",children:[a.jsx("div",{className:"p-4 border-b",children:a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[a.jsx("h2",{className:"text-lg font-semibold mb-4 sm:mb-0",children:"User Management"}),a.jsxs("div",{className:"flex space-x-4",children:[a.jsxs("div",{className:"relative",children:[a.jsx(wt,{className:"absolute left-3 top-2.5 h-5 w-5 text-gray-400"}),a.jsx("input",{type:"text",placeholder:"Search users...",className:"pl-10 pr-4 py-2 border rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),a.jsx("button",{className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Add User"})]})]})}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Email"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Role"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200"})]})})]});case"settings":return a.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[a.jsx("h2",{className:"text-lg font-semibold mb-6",children:"System Settings"}),a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-md font-medium mb-4",children:"General Settings"}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Company Name"}),a.jsx("input",{type:"text",className:"w-full border rounded-md px-3 py-2"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Contact Email"}),a.jsx("input",{type:"email",className:"w-full border rounded-md px-3 py-2"})]})]})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-md font-medium mb-4",children:"Booking Settings"}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Minimum Booking Duration (minutes)"}),a.jsx("input",{type:"number",className:"w-full border rounded-md px-3 py-2"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Maximum Booking Duration (hours)"}),a.jsx("input",{type:"number",className:"w-full border rounded-md px-3 py-2"})]})]})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-md font-medium mb-4",children:"Payment Settings"}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Base Rate (Two Wheeler)"}),a.jsx("input",{type:"number",className:"w-full border rounded-md px-3 py-2"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Base Rate (Four Wheeler)"}),a.jsx("input",{type:"number",className:"w-full border rounded-md px-3 py-2"})]})]})]}),a.jsx("div",{className:"pt-4 border-t",children:a.jsx("button",{className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Save Changes"})})]})]});default:return null}};return s?a.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:a.jsx("div",{className:"text-2xl text-blue-600",children:"Loading admin dashboard..."})}):a.jsx("div",{className:"min-h-screen bg-gray-50",children:a.jsxs("div",{className:"flex",children:[a.jsxs("div",{className:"w-64 bg-white shadow-md min-h-screen",children:[a.jsx("div",{className:"p-4 border-b",children:a.jsx("h1",{className:"text-xl font-bold text-gray-900",children:"Admin Panel"})}),a.jsx("nav",{className:"p-4",children:a.jsx("ul",{className:"space-y-2",children:[{id:"overview",label:"Overview",icon:a.jsx(ca,{className:"h-5 w-5"})},{id:"bookings",label:"Bookings",icon:a.jsx(Pt,{className:"h-5 w-5"})},{id:"users",label:"Users",icon:a.jsx(es,{className:"h-5 w-5"})},{id:"settings",label:"Settings",icon:a.jsx(Bs,{className:"h-5 w-5"})}].map(m=>a.jsx("li",{children:a.jsxs("button",{onClick:()=>o(m.id),className:`w-full flex items-center space-x-2 px-4 py-2 rounded-md ${i===m.id?"bg-blue-50 text-blue-600":"text-gray-600 hover:bg-gray-50"}`,children:[m.icon,a.jsx("span",{children:m.label})]})},m.id))})})]}),a.jsx("div",{className:"flex-1 p-8",children:a.jsx("div",{className:"max-w-7xl mx-auto",children:f()})})]})})}function _o(){const{user:r,signOut:e}=te(),t=xt(),s=tr(),n=async()=>{try{await e(),N.success("Signed out successfully"),t("/")}catch{N.error("Error signing out")}},i=o=>s.pathname===o;return a.jsx("nav",{className:"bg-white shadow-lg sticky top-0 z-50",children:a.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:a.jsxs("div",{className:"flex justify-between h-16",children:[a.jsx("div",{className:"flex items-center",children:a.jsxs(G,{to:"/",className:"flex items-center space-x-2",children:[a.jsx(le,{className:"h-8 w-8 text-blue-600"}),a.jsx("span",{className:"text-xl font-bold text-gray-900",children:"SpotMaster"})]})}),a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx(G,{to:"/pricing",className:`text-gray-700 hover:text-blue-600 px-3 py-2 rounded-md text-sm font-medium ${i("/pricing")?"text-blue-600":""}`,children:a.jsxs("div",{className:"flex items-center space-x-1",children:[a.jsx(Ie,{className:"h-4 w-4"}),a.jsx("span",{children:"Pricing"})]})}),r?a.jsxs(a.Fragment,{children:[a.jsx(G,{to:"/dashboard",className:`text-gray-700 hover:text-blue-600 px-3 py-2 rounded-md text-sm font-medium ${i("/dashboard")?"text-blue-600":""}`,children:"Dashboard"}),a.jsx(G,{to:"/account",className:`text-gray-700 hover:text-blue-600 px-3 py-2 rounded-md text-sm font-medium ${i("/account")?"text-blue-600":""}`,children:a.jsxs("div",{className:"flex items-center space-x-1",children:[a.jsx(Fs,{className:"h-4 w-4"}),a.jsx("span",{children:"Account"})]})}),a.jsxs("button",{onClick:n,className:"flex items-center space-x-1 text-gray-700 hover:text-blue-600 px-3 py-2 rounded-md text-sm font-medium",children:[a.jsx(la,{className:"h-4 w-4"}),a.jsx("span",{children:"Sign out"})]})]}):a.jsxs(a.Fragment,{children:[a.jsx(G,{to:"/login",className:"text-gray-700 hover:text-blue-600 px-3 py-2 rounded-md text-sm font-medium",children:"Sign in"}),a.jsx(G,{to:"/register",className:"bg-blue-600 text-white hover:bg-blue-700 px-4 py-2 rounded-md text-sm font-medium transition-colors",children:"Register"})]})]})]})})})}function jo(){const[r,e]=g.useState(""),[t,s]=g.useState(""),[n,i]=g.useState(""),[o,l]=g.useState(!1),c=xt(),{signUp:u}=te(),d=async h=>{if(h.preventDefault(),t!==n){N.error("Passwords do not match");return}if(t.length<6){N.error("Password must be at least 6 characters");return}l(!0);try{await u(r,t),N.success("Registration successful! Please sign in."),c("/login")}catch(f){f.message==="User already registered"?(N.error("This email is already registered. Please sign in instead."),setTimeout(()=>c("/login"),2e3)):N.error("Registration failed. Please try again.")}finally{l(!1)}};return a.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8",children:a.jsxs("div",{className:"max-w-md w-full space-y-8 bg-white p-8 rounded-xl shadow-lg",children:[a.jsxs("div",{children:[a.jsx(da,{className:"mx-auto h-12 w-12 text-green-600"}),a.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"Create your account"}),a.jsxs("p",{className:"mt-2 text-center text-sm text-gray-600",children:["Or"," ",a.jsx(G,{to:"/login",className:"font-medium text-green-600 hover:text-green-500",children:"sign in to your account"})]})]}),a.jsxs("form",{className:"mt-8 space-y-6",onSubmit:d,children:[a.jsxs("div",{className:"rounded-md shadow-sm -space-y-px",children:[a.jsxs("div",{children:[a.jsx("label",{htmlFor:"email",className:"sr-only",children:"Email address"}),a.jsx("input",{id:"email",name:"email",type:"email",required:!0,className:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-t-md focus:outline-none focus:ring-green-500 focus:border-green-500 focus:z-10 sm:text-sm",placeholder:"Email address",value:r,onChange:h=>e(h.target.value)})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"password",className:"sr-only",children:"Password"}),a.jsx("input",{id:"password",name:"password",type:"password",required:!0,className:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 focus:outline-none focus:ring-green-500 focus:border-green-500 focus:z-10 sm:text-sm",placeholder:"Password",value:t,onChange:h=>s(h.target.value)})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"confirm-password",className:"sr-only",children:"Confirm Password"}),a.jsx("input",{id:"confirm-password",name:"confirm-password",type:"password",required:!0,className:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-b-md focus:outline-none focus:ring-green-500 focus:border-green-500 focus:z-10 sm:text-sm",placeholder:"Confirm Password",value:n,onChange:h=>i(h.target.value)})]})]}),a.jsx("div",{children:a.jsx("button",{type:"submit",disabled:o,className:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 disabled:opacity-50 transition-colors",children:o?"Creating account...":"Create account"})})]})]})})}function ko(){return a.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-gray-50 to-white",children:[a.jsxs("div",{className:"relative bg-gradient-to-r from-blue-600 to-purple-600 text-white overflow-hidden",children:[a.jsx("div",{className:"absolute inset-0 bg-black opacity-50"}),a.jsx("div",{className:"absolute inset-0",style:{backgroundImage:'url("https://images.unsplash.com/photo-1506521781263-d8422e82f27a?ixlib=rb-1.2.1&auto=format&fit=crop&w=1920&q=80")',backgroundSize:"cover",backgroundPosition:"center",opacity:.3}}),a.jsx("div",{className:"relative max-w-7xl mx-auto py-24 px-4 sm:py-32 sm:px-6 lg:px-8",children:a.jsxs(M.div,{className:"text-center",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},children:[a.jsx("h1",{className:"text-5xl font-extrabold tracking-tight sm:text-6xl lg:text-7xl",children:"Find Your Perfect Parking Spot"}),a.jsx("p",{className:"mt-6 text-xl max-w-3xl mx-auto",children:"SpotMaster helps you find and book parking spots in real-time. Save time and avoid the hassle of searching for parking."}),a.jsx("div",{className:"mt-10 max-w-xl mx-auto",children:a.jsx("div",{className:"bg-white rounded-lg shadow-xl p-4",children:a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx("div",{className:"flex-1",children:a.jsxs("div",{className:"relative",children:[a.jsx(wt,{className:"absolute left-3 top-3 h-5 w-5 text-gray-400"}),a.jsx("input",{type:"text",placeholder:"Enter location or landmark",className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})}),a.jsx(G,{to:"/dashboard",className:"bg-gradient-to-r from-blue-600 to-purple-600 text-white px-6 py-2 rounded-lg hover:from-blue-700 hover:to-purple-700 transition-all duration-200 shadow-lg hover:shadow-xl",children:"Find Parking"})]})})})]})})]}),a.jsx("div",{className:"py-24 bg-white",children:a.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[a.jsxs(M.div,{className:"text-center mb-16",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.2},children:[a.jsx("h2",{className:"text-4xl font-bold text-gray-900",children:"Premium Parking Experience"}),a.jsx("p",{className:"mt-4 text-xl text-gray-600",children:"Everything you need for hassle-free parking"})]}),a.jsx("div",{className:"grid grid-cols-1 gap-12 sm:grid-cols-2 lg:grid-cols-4",children:[{icon:a.jsx(le,{className:"h-12 w-12 text-blue-600"}),title:"Smart Booking",description:"Book parking spots instantly with real-time availability"},{icon:a.jsx(Ms,{className:"h-12 w-12 text-purple-600"}),title:"GPS Navigation",description:"Get turn-by-turn directions to your parking spot"},{icon:a.jsx(Ie,{className:"h-12 w-12 text-green-600"}),title:"Secure Payments",description:"Pay safely using UPI or cards with instant confirmation"},{icon:a.jsx(Us,{className:"h-12 w-12 text-yellow-600"}),title:"24/7 Support",description:"Get help anytime with our AI-powered assistant"}].map((r,e)=>a.jsxs(M.div,{className:"text-center",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.3+e*.1},children:[a.jsx("div",{className:"flex justify-center mb-4",children:a.jsx("div",{className:"p-3 bg-gray-50 rounded-2xl shadow-lg",children:r.icon})}),a.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:r.title}),a.jsx("p",{className:"text-gray-600",children:r.description})]},e))})]})}),a.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-purple-600 text-white py-16",children:a.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:a.jsxs(M.div,{className:"text-center",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.4},children:[a.jsx("h2",{className:"text-3xl font-bold mb-4",children:"Ready to Start Parking Smarter?"}),a.jsx("p",{className:"text-xl mb-8",children:"Join thousands of happy users who've simplified their parking experience"}),a.jsx(G,{to:"/register",className:"inline-flex items-center px-8 py-3 border-2 border-white rounded-lg text-lg font-medium hover:bg-white hover:text-blue-600 transition-colors duration-200",children:"Get Started Now"})]})})})]})}function So(){return a.jsx("div",{className:"min-h-screen bg-gray-50 py-12",children:a.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[a.jsxs("div",{className:"text-center",children:[a.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-8",children:"Simple, Dynamic Pricing"}),a.jsx("p",{className:"text-xl text-gray-600 mb-12",children:"Pay only for the time you park, with rates that adapt to demand"})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8 mb-16",children:[a.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[a.jsx(Ie,{className:"h-8 w-8 text-blue-600 mb-4"}),a.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Base Rate"}),a.jsx("p",{className:"text-gray-600",children:"Starting from $2/hour for two-wheelers and $4/hour for four-wheelers"})]}),a.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[a.jsx(Et,{className:"h-8 w-8 text-green-600 mb-4"}),a.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Time of Day"}),a.jsx("p",{className:"text-gray-600",children:"Peak hours (9 AM - 5 PM) may have higher rates"})]}),a.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[a.jsx(Pt,{className:"h-8 w-8 text-purple-600 mb-4"}),a.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Duration"}),a.jsx("p",{className:"text-gray-600",children:"Longer stays may qualify for discounted rates"})]}),a.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[a.jsx(ua,{className:"h-8 w-8 text-yellow-600 mb-4"}),a.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Demand"}),a.jsx("p",{className:"text-gray-600",children:"Prices adjust based on spot availability"})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 mb-16",children:[a.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-md border-t-4 border-blue-500",children:[a.jsx("h3",{className:"text-2xl font-bold mb-4",children:"Two Wheelers"}),a.jsxs("ul",{className:"space-y-4",children:[a.jsxs("li",{className:"flex items-center",children:[a.jsx("span",{className:"w-4 h-4 bg-blue-500 rounded-full mr-3"}),"Base rate: $2/hour"]}),a.jsxs("li",{className:"flex items-center",children:[a.jsx("span",{className:"w-4 h-4 bg-blue-500 rounded-full mr-3"}),"Peak hour rate: $3/hour"]}),a.jsxs("li",{className:"flex items-center",children:[a.jsx("span",{className:"w-4 h-4 bg-blue-500 rounded-full mr-3"}),"Off-peak discount: 20% off"]})]})]}),a.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-md border-t-4 border-green-500",children:[a.jsx("h3",{className:"text-2xl font-bold mb-4",children:"Four Wheelers"}),a.jsxs("ul",{className:"space-y-4",children:[a.jsxs("li",{className:"flex items-center",children:[a.jsx("span",{className:"w-4 h-4 bg-green-500 rounded-full mr-3"}),"Base rate: $4/hour"]}),a.jsxs("li",{className:"flex items-center",children:[a.jsx("span",{className:"w-4 h-4 bg-green-500 rounded-full mr-3"}),"Peak hour rate: $6/hour"]}),a.jsxs("li",{className:"flex items-center",children:[a.jsx("span",{className:"w-4 h-4 bg-green-500 rounded-full mr-3"}),"Off-peak discount: 15% off"]})]})]})]}),a.jsxs("div",{className:"bg-gradient-to-r from-blue-600 to-purple-600 text-white p-8 rounded-lg shadow-md",children:[a.jsx("h3",{className:"text-2xl font-bold mb-4",children:"Special Offers"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[a.jsxs("div",{className:"bg-white bg-opacity-10 p-4 rounded-lg",children:[a.jsx("h4",{className:"font-semibold mb-2",children:"Early Bird"}),a.jsx("p",{children:"30% off for bookings before 8 AM"})]}),a.jsxs("div",{className:"bg-white bg-opacity-10 p-4 rounded-lg",children:[a.jsx("h4",{className:"font-semibold mb-2",children:"Weekend Pass"}),a.jsx("p",{children:"Flat rates for 48-hour parking"})]}),a.jsxs("div",{className:"bg-white bg-opacity-10 p-4 rounded-lg",children:[a.jsx("h4",{className:"font-semibold mb-2",children:"Monthly Pass"}),a.jsx("p",{children:"Save up to 40% with monthly subscriptions"})]})]})]})]})})}function No(){const{user:r}=te(),[e,t]=g.useState({full_name:"",phone:"",preferred_payment:"card",notifications_enabled:!0}),[s,n]=g.useState(!0),[i,o]=g.useState([]);g.useEffect(()=>{r&&(l(),c())},[r]);const l=async()=>{try{const{data:d,error:h}=await T.from("profiles").select("*").eq("id",r==null?void 0:r.id).single();if(h)throw h;d&&t(d)}catch{N.error("Error loading profile")}finally{n(!1)}},c=async()=>{try{const{data:d,error:h}=await T.from("bookings").select(`
          id,
          start_time,
          end_time,
          status,
          vehicle_type,
          actual_price,
          parking_spots (
            address
          )
        `).eq("user_id",r==null?void 0:r.id).order("start_time",{ascending:!1});if(h)throw h;o(d||[])}catch{N.error("Error loading booking history")}},u=async d=>{d.preventDefault();try{const{error:h}=await T.from("profiles").upsert({id:r==null?void 0:r.id,...e,updated_at:new Date});if(h)throw h;N.success("Profile updated successfully")}catch{N.error("Error updating profile")}};return s?a.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:"Loading..."}):a.jsx("div",{className:"min-h-screen bg-gray-50 py-12",children:a.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[a.jsx("div",{className:"lg:col-span-2",children:a.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[a.jsxs("div",{className:"flex items-center mb-6",children:[a.jsx(Fs,{className:"h-6 w-6 text-blue-600 mr-2"}),a.jsx("h2",{className:"text-2xl font-bold",children:"Profile Settings"})]}),a.jsxs("form",{onSubmit:u,className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Full Name"}),a.jsx("input",{type:"text",value:e.full_name,onChange:d=>t({...e,full_name:d.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Phone"}),a.jsx("input",{type:"tel",value:e.phone,onChange:d=>t({...e,phone:d.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Preferred Payment"}),a.jsxs("select",{value:e.preferred_payment,onChange:d=>t({...e,preferred_payment:d.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",children:[a.jsx("option",{value:"card",children:"Card"}),a.jsx("option",{value:"upi",children:"UPI"})]})]}),a.jsxs("div",{className:"flex items-center",children:[a.jsx("input",{type:"checkbox",checked:e.notifications_enabled,onChange:d=>t({...e,notifications_enabled:d.target.checked}),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),a.jsx("label",{className:"ml-2 block text-sm text-gray-700",children:"Enable notifications"})]}),a.jsx("div",{className:"flex justify-end",children:a.jsx("button",{type:"submit",className:"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 transition-colors",children:"Save Changes"})})]})]})}),a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[a.jsxs("div",{className:"flex items-center mb-4",children:[a.jsx(Bs,{className:"h-6 w-6 text-purple-600 mr-2"}),a.jsx("h3",{className:"text-lg font-semibold",children:"Account Summary"})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-gray-600",children:"Total Bookings"}),a.jsx("span",{className:"font-semibold",children:i.length})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-gray-600",children:"Member Since"}),a.jsx("span",{className:"font-semibold",children:new Date((r==null?void 0:r.created_at)||"").toLocaleDateString()})]})]})]}),a.jsxs("div",{className:"bg-gradient-to-r from-purple-600 to-blue-600 text-white rounded-lg shadow-md p-6",children:[a.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Download Our App"}),a.jsx("p",{className:"text-sm mb-4",children:"Get the SpotMaster app for a better experience"}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("a",{href:"#",className:"block bg-white text-gray-900 px-4 py-2 rounded-md text-center hover:bg-gray-100 transition-colors",children:"Download for Android"}),a.jsx("a",{href:"#",className:"block bg-white text-gray-900 px-4 py-2 rounded-md text-center hover:bg-gray-100 transition-colors",children:"Download for iOS"})]})]})]})]}),a.jsx("div",{className:"mt-8",children:a.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[a.jsxs("div",{className:"flex items-center mb-6",children:[a.jsx(Et,{className:"h-6 w-6 text-green-600 mr-2"}),a.jsx("h2",{className:"text-2xl font-bold",children:"Booking History"})]}),a.jsx("div",{className:"space-y-6",children:i.map(d=>a.jsxs("div",{className:"border-b pb-4 last:border-b-0 last:pb-0",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx(le,{className:"h-5 w-5 text-gray-500 mr-2"}),a.jsx("span",{className:"font-medium",children:d.parking_spots.address})]}),a.jsx("span",{className:`px-2 py-1 rounded-full text-sm ${d.status==="completed"?"bg-green-100 text-green-800":d.status==="cancelled"?"bg-red-100 text-red-800":"bg-blue-100 text-blue-800"}`,children:d.status})]}),a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm text-gray-600",children:[a.jsxs("div",{children:[a.jsx("span",{className:"block text-gray-500",children:"Start Time"}),new Date(d.start_time).toLocaleString()]}),a.jsxs("div",{children:[a.jsx("span",{className:"block text-gray-500",children:"End Time"}),d.end_time?new Date(d.end_time).toLocaleString():"Ongoing"]}),a.jsxs("div",{children:[a.jsx("span",{className:"block text-gray-500",children:"Vehicle Type"}),d.vehicle_type==="two_wheeler"?"Two Wheeler":"Four Wheeler"]}),a.jsxs("div",{children:[a.jsx("span",{className:"block text-gray-500",children:"Amount"}),"$",d.actual_price]})]})]},d.id))})]})})]})})}function os({children:r}){const{user:e,loading:t}=te();return t?a.jsx("div",{className:"min-h-screen flex items-center justify-center",children:"Loading..."}):e?a.jsx(a.Fragment,{children:r}):a.jsx(ls,{to:"/login"})}function Po({children:r}){const{user:e,loading:t}=te();return t?a.jsx("div",{className:"min-h-screen flex items-center justify-center",children:"Loading..."}):(e==null?void 0:e.email)==="sagar"?a.jsx(a.Fragment,{children:r}):a.jsx(ls,{to:"/dashboard"})}function Eo(){return a.jsx(sr,{children:a.jsxs(na,{children:[a.jsx(Jr,{position:"top-right"}),a.jsx(_o,{}),a.jsxs(rr,{children:[a.jsx(re,{path:"/",element:a.jsx(ko,{})}),a.jsx(re,{path:"/login",element:a.jsx(ha,{})}),a.jsx(re,{path:"/register",element:a.jsx(jo,{})}),a.jsx(re,{path:"/pricing",element:a.jsx(So,{})}),a.jsx(re,{path:"/account",element:a.jsx(os,{children:a.jsx(No,{})})}),a.jsx(re,{path:"/dashboard",element:a.jsx(os,{children:a.jsx(wo,{})})}),a.jsx(re,{path:"/admin",element:a.jsx(Po,{children:a.jsx(xo,{})})})]})]})})}cs(document.getElementById("root")).render(a.jsx(g.StrictMode,{children:a.jsx(Eo,{})}));
//# sourceMappingURL=index-DiYnBZP4.js.map
